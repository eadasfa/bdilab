webpackJsonp([30],{"3kKC":function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{attrs:{placeholder:"项目编号"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.query(e)}},model:{value:t.searchForm.projectNo,callback:function(e){t.$set(t.searchForm,"projectNo",e)},expression:"searchForm.projectNo"}})],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{loading:t.loading,icon:"el-icon-search"},on:{click:t.query}},[t._v("搜索")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.openCreateForm}},[t._v("添加")]),t._v(" "),o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"warning",icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v("导出excel")])],1)],1),t._v(" "),o("el-table",{attrs:{data:t.projects,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"80",type:"index"}}),t._v(" "),o("el-table-column",{attrs:{label:"项目名称","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("router-link",{attrs:{to:"/integratedService/projectOverview?id="+e.row.id}},[t._v("\n          "+t._s(e.row.projectName)+"\n        ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"项目编号","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.projectNo)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"项目状态","max-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",{attrs:{type:"已完成"===e.row.projectStatus?"success":"danger"}},[t._v(t._s(e.row.projectStatus)+"\n        ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"项目执行单位编号","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.projectExecutionUnitNo)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"项目简介","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tooltip",{attrs:{content:e.row.projectOverview}},[o("span",[t._v(t._s(t._f("cutLargeText")(e.row.projectOverview,20)))])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"80",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){t.openUpdateForm(e.row)}}},[o("i",{staticClass:"el-icon-edit"})]),t._v(" "),o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){t.confirmDelete(e.row)}}},[o("i",{staticClass:"el-icon-delete"})])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"projectForm",staticClass:"small-space",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.formData,"label-position":"right","label-width":"140px"}},[o("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:[{required:!0,message:"项目名称不能为空"}]}},[o("el-input",{model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"项目状态",prop:"projectStatus",rules:[{required:!0,message:"项目状态不能为空"}]}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.projectStatus,callback:function(e){t.$set(t.formData,"projectStatus",e)},expression:"formData.projectStatus"}},t._l(t.projectStatusOptions,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"项目执行单位编号",prop:"projectExecutionUnitNo",rules:[{required:!0,message:"项目执行单位编号不能为空"}]}},[o("el-input",{model:{value:t.formData.projectExecutionUnitNo,callback:function(e){t.$set(t.formData,"projectExecutionUnitNo",e)},expression:"formData.projectExecutionUnitNo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"项目简介",prop:"projectOverview",rules:[{required:!0,message:"项目简介不能为空"}]}},[o("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.formData.projectOverview,callback:function(e){t.$set(t.formData,"projectOverview",e)},expression:"formData.projectOverview"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?o("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.create}},[t._v("确定")]):o("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.update}},[t._v("确定")])],1)],1)],1)},a=[],i={render:r,staticRenderFns:a};e.a=i},QloR:function(t,e,o){"use strict";var r=o("Dd8w"),a=o.n(r),i=o("NYxO"),n=o("0xDb");e.a={data:function(){return{loading:!1,dialogFormVisible:!1,dialogStatus:"",searchForm:{page:0,size:999,sort:"id,desc"},textMap:{update:"编辑",create:"创建"},formData:{id:0,projectName:"",projectExecutionUnitNo:"",projectOverview:"",projectStatus:"未完成"},projectStatusOptions:[{value:"未完成",label:"未完成"},{value:"已完成",label:"已完成"}]}},computed:a()({},o.i(i.b)(["menus","projects","loginUser"])),mounted:function(){this.query()},methods:a()({},o.i(i.c)(["createProject","updateProject","deleteProject","queryAllBridges","queryAllProjects"]),{query:function(){var t=this;this.loading=!0,this.queryAllProjects(this.searchForm).then(function(){return t.queryAllBridges({projection:"inline"})}).then(function(){t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},openCreateForm:function(){this.formData={id:0,projectName:"",projectExecutionUnitNo:this.loginUser.companyNo||"",projectOverview:"",projectStatus:"未完成"},this.dialogStatus="create",this.dialogFormVisible=!0},openUpdateForm:function(t){this.formData=o.i(n.l)(t),this.dialogStatus="update",this.dialogFormVisible=!0},confirmDelete:function(t){var e=this;this.$confirm("此操作将永久删除此数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){e.deleteProject(t).then(function(){o.i(n.d)(),e.query()}).catch(function(t){o.i(n.d)("删除失败!",{type:"error"})})}).catch(function(){o.i(n.d)("已取消删除操作!",{type:"info"})})},create:function(){var t=this;this.loading=!0,this.$refs.projectForm.validate(function(e){e?t.createProject(t.formData).then(function(){o.i(n.d)(),t.loading=!1,t.dialogFormVisible=!1,t.query()}).catch(function(e){o.i(n.d)("",{type:"error"}),t.loading=!1,t.dialogFormVisible=!1}):(o.i(n.d)("检查所填字段",{type:"warning"}),t.loading=!1)})},update:function(){var t=this;this.loading=!0,this.$refs.projectForm.validate(function(e){e&&t.updateProject(t.formData).then(function(){o.i(n.d)(),t.loading=!1,t.dialogFormVisible=!1,t.query()}).catch(function(e){o.i(n.d)("",{type:"error"}),t.loading=!1,t.dialogFormVisible=!1})})},handleDownload:function(){var t=this;this.$confirm("您确定要导出Excel吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){t.exportExcel(),o.i(n.d)("已成功导出Excel!")}).catch(function(){o.i(n.d)("已取消",{type:"info"})})},exportExcel:function(){var t=this;Promise.all([o.e(36),o.e(35)]).then(function(){var e=o("zWO4"),r=e.export_json_to_excel,a=["序号","项目名称","项目编号","项目状态","项目执行单位编号","项目简介"],i=["id","projectName","projectNo","projectStatus","projectExecutionUnitNo","projectOverview"];r(a,o.i(n.h)(i,t.menus),"项目信息")}.bind(null,o)).catch(o.oe)}})}},"r+Hr":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("QloR"),a=o("3kKC"),i=o("VU/8"),n=i(r.a,a.a,null,null,null);e.default=n.exports}});