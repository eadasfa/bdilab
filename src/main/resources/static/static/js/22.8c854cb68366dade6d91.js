webpackJsonp([22],{"3xfT":function(t,e,o){"use strict";function n(t){o("ezFx")}Object.defineProperty(e,"__esModule",{value:!0});var i=o("ESMr"),a=o("7+SQ"),r=o("VU/8"),c=n,s=r(i.a,a.a,c,"data-v-7c3f73c4",null);e.default=s.exports},"7+SQ":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{display:"flex"}},[o("baidu-map",{staticClass:"bmap-view",attrs:{center:t.mapConfig.center,zoom:t.mapConfig.zoom,"scroll-wheel-zoom":!0},on:{ready:t.onMapReady}},[o("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),t._v(" "),o("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),t._v(" "),o("bm-copyright",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",copyright:[{id:1,content:"",bounds:{ne:{lng:110,lat:40},sw:{lng:0,lat:0}}},{id:2,content:"<a target=_blank href=http://www.ccruitong.com/>中交瑞通路桥养护科技有限公司</a>"}]}}),t._v(" "),t._l(t.bridges,function(e,n){return o("bm-marker",{key:e.id,attrs:{position:{lng:e.bridgeLat,lat:e.bridgeLng},dragging:!1},on:{click:function(e){t.onInfoWindowOpen(e,n)}}},[o("bm-info-window",{attrs:{show:t.showInfoWindow[n].show},on:{close:function(e){t.onInfoWindowClose(e,n)},open:function(e){t.onInfoWindowOpen(e,n)}}},[o("p",[t._v("桥梁名称："+t._s(e.bridgeName))]),t._v(" "),o("p",[t._v("桥梁编号："+t._s(e.bridgeNo))]),t._v(" "),o("p",[t._v("桥梁位置："+t._s(e.bridgeLocation))]),t._v(" "),o("p",[t._v("桥梁坐标："+t._s(e.bridgeLat)+","+t._s(e.bridgeLng))])])],1)})],2),t._v(" "),o("div",{staticStyle:{margin:"1px"}},[o("el-form",{staticStyle:{margin:"10px 10px"},attrs:{"label-position":t.labelPosition,"label-width":"140px",model:t.formData}},[o("el-form-item",{attrs:{label:"项目名称"}},[o("el-input",{attrs:{disabled:""},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"项目编号"}},[o("el-input",{attrs:{disabled:""},model:{value:t.formData.projectNo,callback:function(e){t.$set(t.formData,"projectNo",e)},expression:"formData.projectNo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"项目执行单位编号"}},[o("el-input",{attrs:{disabled:""},model:{value:t.formData.projectExecutionUnitNo,callback:function(e){t.$set(t.formData,"projectExecutionUnitNo",e)},expression:"formData.projectExecutionUnitNo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"项目概况"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.formData.projectOverview,callback:function(e){t.$set(t.formData,"projectOverview",e)},expression:"formData.projectOverview"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSaveClick}},[t._v("保存")]),t._v(" "),o("el-button",{on:{click:t.onCancelClick}},[t._v("取消")])],1)],1)],1)],1)},i=[],a={render:n,staticRenderFns:i};e.a=a},"8ILH":function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,".bmap-view[data-v-7c3f73c4]{width:65%;min-height:500px}",""])},ESMr:function(t,e,o){"use strict";var n=o("Dd8w"),i=o.n(n),a=o("NYxO"),r=o("0xDb");e.a={data:function(){return{mapConfig:{center:{lng:0,lat:0},zoom:5},labelPosition:"right",formData:{id:0,projectName:"",projectNo:"",projectExecutionUnitNo:"",projectOverview:""},showInfoWindow:[],bridges:[]}},computed:i()({},o.i(a.b)(["selectedProject","menus"])),mounted:function(){this.onCancelClick()},watch:{menus:function(){this.onCancelClick()}},methods:i()({},o.i(a.c)(["updateProject","queryAllBridges"]),{onMapReady:function(t){t.BMap,t.map;this.resetMapCenter()},resetMapCenter:function(){var t=this.bridges;if(t&&t.length){var e=t[0],o=e.bridgeLat,n=e.bridgeLng;this.mapConfig.center.lng=+o,this.mapConfig.center.lat=+n}},onSaveClick:function(){var t=this;this.updateProject(this.formData).then(function(){o.i(r.d)(),t.queryAllBridges({projection:"inline"}).then(function(){}).catch(function(){})}).catch(function(t){o.i(r.d)("保存失败！",{type:"error"})})},onCancelClick:function(){var t={children:[]};if(this.selectedProject.id)t=this.selectedProject;else{var e=this.$route.query.id,n=this.menus.filter(function(t){return t.id===parseInt(e)});n.length&&(t=n[0])}this.formData=o.i(r.l)(t),this.bridges=t.children,this.resetMapCenter(),this.showInfoWindow=this.bridges.map(function(t){return{show:!1}})},onInfoWindowOpen:function(t,e){this.showInfoWindow[e].show=!0},onInfoWindowClose:function(t,e){this.showInfoWindow[e].show=!1}})}},ezFx:function(t,e,o){var n=o("8ILH");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o("rjj0")("7eeee943",n,!0)}});