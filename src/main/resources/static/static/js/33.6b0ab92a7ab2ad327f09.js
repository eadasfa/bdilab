webpackJsonp([33],{fQs8:function(e,t){},"w+tA":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),l=a.n(r),o=a("ZoQJ"),s=[{label:"审核拒绝",value:3},{label:"未审核",value:1},{label:"审核通过",value:2}],i={id:0,name:"",address:"",detailAddress:"",saleID:"",area:"",operateTypes:"",principalName:"",principalTelephone:"",principalIDCardNo:"",principalIDCardAPath:"",principalIDCardBPath:"",doorheadPhotoPathAndName:"",businessLicenseNo:"",principalEmail:"",barPhoto:"",restaurantPhoto:"",bankName:"",branchAddress:"",branchName:"",account:"",hygienicLicensePath:"",logoPath:"",businessLicensePath:"",businessDay:"",businessTime:"",otherService:"",mchId:"",registStatus:""},n={data:function(){return{total:1,textarea:"",editDialog:!1,options:s,typeOptions:[],ruleForm:Object(o.b)(i),rules:{},areaList:[],formInline:{id:"",name:"",regist:"",operateType:"",adCode:[],current:1},tableData:[]}},mounted:function(){this.getAreaTree(),this.getTypeTree(),this.getCheckData()},methods:{getTypeTree:function(){var e=this;this.$axios.get("/operateType/listAllname").then(function(t){e.typeOptions=t})},query:function(){this.getCheckData()},getCheckData:function(){var e=this;this.$axios.get("/restaurantInfo/filterRestaurantInfo",{params:l()({},this.formInline,{adCode:this.formInline.adCode.join(",")})}).then(function(t){e.total=t.total,e.tableData=t.records}).catch(function(e){console.log(e)})},checkMc:function(e,t,a){var r=this,l=this.ruleForm,s=l.registStatus,i=l.mchId,n=l.id;if("number"==typeof e){var c={id:n,regist:e,registStatus:s,profitShareFlag:t,mchId:i};s&&i?this.$axios({method:"get",url:"/restaurantInfo/checkRes",dataType:"json",crossDomain:!0,cache:!1,params:c}).then(function(e){Object(o.d)("审核成功",{type:"success"}),r.editDialog=!1,r.getCheckData()}):Object(o.d)("商户号和审核意见都不能为空",{type:"warning"})}else{var u={id:n,regist:a,registStatus:s,profitShareFlag:t,mchId:i};this.ruleForm.regist;this.$axios({method:"get",url:"/restaurantInfo/checkRes",dataType:"json",crossDomain:!0,cache:!1,params:u}).then(function(e){Object(o.d)("操作成功",{type:"success"}),r.editDialog=!1,r.getCheckData()})}},submitDownload:function(e){this.formInline.current=e,this.getCheckData();var t=parseInt(this.ruleForm.id);window.open(this.$axios.defaults.baseURL+"/restaurantInfo/downloadAllPic/"+t).then(function(e){0===e.code?Object(o.d)(e.message,{type:"success"}):Object(o.d)(e.message,{type:"error"})}).catch(function(e){console.log("error",e)})},getAreaTree:function(){var e=this;this.$axios.get("/area/getTree").then(function(t){e.areaList=t.result})},handleCurrentChange:function(){var e=this;this.$axios.get("/restaurantInfo/filterRestaurantInfo",{params:l()({},this.formInline,{adCode:this.formInline.adCode.join(",")})}).then(function(t){e.total=t.total,e.tableData=t.records}).catch(function(e){console.log(e)})},handleEdit:function(e,t){this.ruleForm=Object(o.b)(t),this.editDialog=!0}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"商家编号"}},[a("el-input",{attrs:{placeholder:"请输入商家编号"},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id",t)},expression:"formInline.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家名称"}},[a("el-input",{attrs:{placeholder:"请输入商家名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{staticClass:"handle-select mr10",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.regist,callback:function(t){e.$set(e.formInline,"regist",t)},expression:"formInline.regist"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"业态状态"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.operateType,callback:function(t){e.$set(e.formInline,"operateType",t)},expression:"formInline.operateType"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域"}},[e.areaList?a("el-cascader",{attrs:{clearable:"",options:e.areaList},model:{value:e.formInline.adCode,callback:function(t){e.$set(e.formInline,"adCode",t)},expression:"formInline.adCode"}}):a("el-input",{model:{value:e.formInline.adCode,callback:function(t){e.$set(e.formInline,"adCode",t)},expression:"formInline.adCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{width:50,fixed:"",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"商家编号","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"principalName","min-width":"100px",label:"负责人名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商家名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detailAddress",label:"所属区域",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(1===t.row.regist?"未审核":2===t.row.regist?"审核通过":"审核拒绝")+"\n         ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"principalTelephone",label:"电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleID",label:"销售员",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"面积",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否开通分账功能",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(1===t.row.profitShareFlag?"已开通":0===t.row.profitShareFlag?"未开通":"")+"\n         ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":function(t){e.handleCurrentChange()},"update:currentPage":function(t){e.$set(e.formInline,"current",t)}},model:{value:e.formInline.current,callback:function(t){e.$set(e.formInline,"current",t)},expression:"formInline.current"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"商家审核",width:"60%",visible:e.editDialog},on:{"update:visible":function(t){e.editDialog=t}}},[a("div",{staticStyle:{height:"50%",overflow:"auto"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,inline:!0,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"门店名称",prop:"name"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"门店地址",prop:"address"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"detailAddress"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.detailAddress,callback:function(t){e.$set(e.ruleForm,"detailAddress",t)},expression:"ruleForm.detailAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销售人员",prop:"saleID"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.saleID,callback:function(t){e.$set(e.ruleForm,"saleID",t)},expression:"ruleForm.saleID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺面积",prop:"area"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经营品类",prop:"operateTypes"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.operateTypes,callback:function(t){e.$set(e.ruleForm,"operateTypes",t)},expression:"ruleForm.operateTypes"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人姓名",prop:"principalName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.principalName,callback:function(t){e.$set(e.ruleForm,"principalName",t)},expression:"ruleForm.principalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人电话",prop:"principalTelephone"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.principalTelephone,callback:function(t){e.$set(e.ruleForm,"principalTelephone",t)},expression:"ruleForm.principalTelephone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照编号",prop:"businessLicenseNo"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.businessLicenseNo,callback:function(t){e.$set(e.ruleForm,"businessLicenseNo",t)},expression:"ruleForm.businessLicenseNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"principalEmail"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.principalEmail,callback:function(t){e.$set(e.ruleForm,"principalEmail",t)},expression:"ruleForm.principalEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户银行",prop:"bankName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.bankName,callback:function(t){e.$set(e.ruleForm,"bankName",t)},expression:"ruleForm.bankName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支行地址",prop:"branchAddress"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.branchAddress,callback:function(t){e.$set(e.ruleForm,"branchAddress",t)},expression:"ruleForm.branchAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支行名称",prop:"branchName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.branchName,callback:function(t){e.$set(e.ruleForm,"branchName",t)},expression:"ruleForm.branchName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户账户",prop:"account"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"principalIDCardNo"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.principalIDCardNo,callback:function(t){e.$set(e.ruleForm,"principalIDCardNo",t)},expression:"ruleForm.principalIDCardNo"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"身份证正面",prop:"principalIDCardAPath"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",staticStyle:{width:"100%",height:"100%"},attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.principalIDCardAPath,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"身份证反面",prop:"principalIDCardBPath"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.principalIDCardBPath,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"门头照",prop:"doorheadPhotoPathAndName"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.doorheadPhotoPathAndName,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"餐厅照",prop:"restaurantPhoto"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.restaurantPhoto,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"收银吧台照",prop:"barPhoto"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.barPhoto,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"卫生许可证",prop:"hygienicLicensePath"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.hygienicLicensePath,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"商家LOGO",prop:"logoPath"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.logoPath,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"营业执照",prop:"businessLicensePath"}},[a("div",{staticClass:"set-img"},[a("img",{staticClass:"img",attrs:{src:e.$axios.defaults.baseURL+e.ruleForm.businessLicensePath,alt:""}})])]),e._v(" "),a("el-form-item",{attrs:{label:"营业日",prop:"businessDay"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.businessDay,callback:function(t){e.$set(e.ruleForm,"businessDay",t)},expression:"ruleForm.businessDay"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业时段",prop:"businessTime"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.businessTime,callback:function(t){e.$set(e.ruleForm,"businessTime",t)},expression:"ruleForm.businessTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"其他服务",prop:"otherService"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.otherService,callback:function(t){e.$set(e.ruleForm,"otherService",t)},expression:"ruleForm.otherService"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商户号",prop:"mchId"}},[a("el-input",{model:{value:e.ruleForm.mchId,callback:function(t){e.$set(e.ruleForm,"mchId",t)},expression:"ruleForm.mchId"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"审核意见",prop:"textarea"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入审核意见"},model:{value:e.ruleForm.registStatus,callback:function(t){e.$set(e.ruleForm,"registStatus",t)},expression:"ruleForm.registStatus"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"120px"}},[a("el-button",{attrs:{type:"warning"},on:{click:e.submitDownload}},[e._v("一键下载商户资料")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkMc(2,e.ruleForm.profitShareFlag)}}},[e._v("审核通过")]),e._v(" "),a("el-button",{on:{click:function(t){e.checkMc(3,e.ruleForm.profitShareFlag)}}},[e._v("审核不通过")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkMc("profitShare",1,e.ruleForm.regist)}}},[e._v("开通分账功能")]),e._v(" "),a("el-button",{on:{click:function(t){e.checkMc("profitShare",0,e.ruleForm.regist)}}},[e._v("取消开通分账功能")])],1)],1)],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(n,c,!1,function(e){a("fQs8")},"data-v-79c6f09e",null);t.default=u.exports}});