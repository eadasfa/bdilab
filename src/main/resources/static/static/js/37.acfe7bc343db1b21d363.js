webpackJsonp([37],{"1okC":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("ZoQJ"),r={startDate:null,endDate:null,systemNo:null,systemName:null,adCode:null,payFeeTypeId:null,expireDays:null},o={payId:null,systemUserName:null,systemNo:null,systemRealName:null,payFeeTypeId:"",agentPayType:"",agentPayAmount:"",agentPayTime:"",agentPayStartTime:"",agentValidTime:"",agentPayMan:"",invoiceName:"",invoiceAdress:"",invoicePhone:"",invoiceNumber:"",agentPayNote:"",openBank:"",bankCardNumber:""},n={systemNo:null,systemRealName:null},s={payStartDate:[{required:!0,message:"请选择付费时间",trigger:"change"}],payEndDate:[{required:!0,message:"请选择到期时间",trigger:"change"}]},i={data:function(){return{total:0,searchForm:r,datatime:[],formData:Object(l.b)(o),dialogTableVisible:!1,detailFormData:n,payWayOptions:[],payFeeTypeOptions:["半年","全年","三年"],activeValue:1,inactiveValue:0,addDialog:!1,rules:s,detailTableData:[],pickerOptions:l.g,tableData:[]}},mounted:function(){this.query(),this.queryPayFeeType()},methods:{resetForm:function(e){this.$refs[e].resetFields()},query:function(){var e=this,a=this.searchForm,t=this.datatime;if(t){var l=t[0],r=t[1];this.searchForm.startDate=l,this.searchForm.endDate=r}else this.searchForm.startDate=null,this.searchForm.endDate=null;var o=this.searchForm.expireDays;o&&(this.searchForm.expireDays=parseInt(o)),this.$axios.post("/agentPay/listByConditions",a).then(function(a){var t=a.records;e.tableData=t,e.total=a.total}).catch(function(e){})},queryPayFeeType:function(){var e=this;this.$axios.post("/payMethod/getAllPayMethod").then(function(a){e.payWayOptions=a}).catch(function(e){})},onAddClick:function(e){this.formData=Object(l.b)(e),this.addDialog=!0},create:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;delete a.formData.systemNo,delete a.formData.systemRealName,a.$axios.post("/agentPay/addPay",a.formData).then(function(e){0===e.code?(Object(l.e)(e.mes,{type:"success"}),a.addDialog=!1,a.query()):Object(l.e)(e.mes,{type:"error"})}).catch(function(e){})})},handleCurrentChange:function(e){this.searchForm.current=e,this.query()},onDetailClick:function(e){var a=this;this.dialogTableVisible=!0;var t=e.systemNo,l=e.systemRealName;this.detailFormData={systemNo:t,systemRealName:l},this.$axios.post("/agentPay/getDetails",{systemUserID:e.systemUserID}).then(function(e){a.detailTableData=e.records}).catch(function(e){})}}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"选择日期"}},[t("el-date-picker",{staticStyle:{width:"470px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.datatime,callback:function(a){e.datatime=a},expression:"datatime"}})],1),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"代理商编号"}},[t("el-input",{attrs:{placeholder:"请输入代理商编号"},model:{value:e.searchForm.systemNo,callback:function(a){e.$set(e.searchForm,"systemNo",a)},expression:"searchForm.systemNo"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"代理商名称"}},[t("el-input",{attrs:{placeholder:"代理商名称"},model:{value:e.searchForm.systemName,callback:function(a){e.$set(e.searchForm,"systemName",a)},expression:"searchForm.systemName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"支付方式"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.payFeeTypeId,callback:function(a){e.$set(e.searchForm,"payFeeTypeId",a)},expression:"searchForm.payFeeTypeId"}},e._l(e.payWayOptions,function(e){return t("el-option",{key:e.payId,attrs:{label:e.payName,value:e.payId}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"所属区域"}},[t("el-input",{attrs:{placeholder:"请输入所属区域"},model:{value:e.searchForm.adCode,callback:function(a){e.$set(e.searchForm,"adCode",a)},expression:"searchForm.adCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"即将到期天数"}},[t("el-input",{attrs:{hasClear:"",placeholder:"请输入即将到期天数"},model:{value:e.searchForm.expireDays,callback:function(a){e.$set(e.searchForm,"expireDays",a)},expression:"searchForm.expireDays"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"warning"},on:{click:e.query}},[e._v("导出")])],1)],1),e._v(" "),t("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.$index+10*(e.searchForm.current-1)+1))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"systemNo",label:"代理商编号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"systemRealName","min-width":"100px",label:"付费商名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"payFeeTypeId","min-width":"100px",label:"付费方式",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agentPayType",label:"支付时长",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agentPayAmount",label:"支付金额",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agentPayTime","min-width":"100px",label:"付费时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agentPayStartTime","min-width":"100px",label:"付费开始时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agentValidTime","min-width":"100px",label:"付费到期时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.onAddClick(a.row)}}},[e._v("增加\n          ")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.onDetailClick(a.row)}}},[e._v("详情\n          ")])]}}])})],1),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.searchForm.current,lauut:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.$set(e.searchForm,"current",a)}}})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"商家付费",visible:e.addDialog},on:{"update:visible":function(a){e.addDialog=a}}},[t("el-form",{ref:"formData",attrs:{model:e.formData,inline:!0,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"代理商编号：",prop:"systemNo"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.systemNo,callback:function(a){e.$set(e.formData,"systemNo",a)},expression:"formData.systemNo"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"代理商名称：",prop:"systemRealName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.systemRealName,callback:function(a){e.$set(e.formData,"systemRealName",a)},expression:"formData.systemRealName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"付费方式:",prop:"payFeeTypeId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formData.payFeeTypeId,callback:function(a){e.$set(e.formData,"payFeeTypeId",a)},expression:"formData.payFeeTypeId"}},e._l(e.payWayOptions,function(e){return t("el-option",{key:e.payId,attrs:{label:e.payName,value:e.payId}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"支付时长",prop:"agentPayType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formData.agentPayType,callback:function(a){e.$set(e.formData,"agentPayType",a)},expression:"formData.agentPayType"}},e._l(e.payFeeTypeOptions,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"支付金额",prop:"agentPayAmount"}},[t("el-input",{model:{value:e.formData.agentPayAmount,callback:function(a){e.$set(e.formData,"agentPayAmount",a)},expression:"formData.agentPayAmount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"付款时间",prop:"agentPayTime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择付费时间"},model:{value:e.formData.agentPayTime,callback:function(a){e.$set(e.formData,"agentPayTime",a)},expression:"formData.agentPayTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"付费开始时间",prop:"agentPayStartTime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择付费开始时间"},model:{value:e.formData.agentPayStartTime,callback:function(a){e.$set(e.formData,"agentPayStartTime",a)},expression:"formData.agentPayStartTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"付费到期时间",prop:"agentValidTime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择到期时间"},model:{value:e.formData.agentValidTime,callback:function(a){e.$set(e.formData,"agentValidTime",a)},expression:"formData.agentValidTime"}})],1),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"付费人",prop:"agentPayMan"}},[t("el-input",{model:{value:e.formData.agentPayMan,callback:function(a){e.$set(e.formData,"agentPayMan",a)},expression:"formData.agentPayMan"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开票名称：",prop:"invoiceName"}},[t("el-input",{model:{value:e.formData.invoiceName,callback:function(a){e.$set(e.formData,"invoiceName",a)},expression:"formData.invoiceName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开票税号：",prop:"invoiceNumber"}},[t("el-input",{model:{value:e.formData.invoiceNumber,callback:function(a){e.$set(e.formData,"invoiceNumber",a)},expression:"formData.invoiceNumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开票地址：",prop:"invoiceAdress"}},[t("el-input",{model:{value:e.formData.invoiceAdress,callback:function(a){e.$set(e.formData,"invoiceAdress",a)},expression:"formData.invoiceAdress"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开票电话：",prop:"invoicePhone"}},[t("el-input",{model:{value:e.formData.invoicePhone,callback:function(a){e.$set(e.formData,"invoicePhone",a)},expression:"formData.invoicePhone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开户行：",prop:"openBank"}},[t("el-input",{model:{value:e.formData.openBank,callback:function(a){e.$set(e.formData,"openBank",a)},expression:"formData.openBank"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开户行账号：",prop:"bankCardNumber"}},[t("el-input",{model:{value:e.formData.bankCardNumber,callback:function(a){e.$set(e.formData,"bankCardNumber",a)},expression:"formData.bankCardNumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"agentPayNote"}},[t("el-input",{model:{value:e.formData.agentPayNote,callback:function(a){e.$set(e.formData,"agentPayNote",a)},expression:"formData.agentPayNote"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"120px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.create("formData")}}},[e._v("确定")]),e._v(" "),t("el-button",{on:{click:function(a){e.resetForm()}}},[e._v("重置")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"详情",visible:e.dialogTableVisible},on:{"update:visible":function(a){e.dialogTableVisible=a}}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.detailFormData}},[t("el-form-item",{attrs:{label:"代理商编号:",prop:"systemNo"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailFormData.systemNo,callback:function(a){e.$set(e.detailFormData,"systemNo",a)},expression:"detailFormData.systemNo"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"代理商名称:",prop:"systemRealName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailFormData.systemRealName,callback:function(a){e.$set(e.detailFormData,"systemRealName",a)},expression:"detailFormData.systemRealName"}})],1)],1),e._v(" "),t("el-table",{attrs:{data:e.detailTableData}},[t("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{property:"agentPayTime",label:"付费时间"}}),e._v(" "),t("el-table-column",{attrs:{property:"agentPayStartTime",label:"付费开始日期"}}),e._v(" "),t("el-table-column",{attrs:{property:"agentValidTime",label:"付费结束日期"}}),e._v(" "),t("el-table-column",{attrs:{property:"agentPayAmount",label:"付费金额"}}),e._v(" "),t("el-table-column",{attrs:{property:"payFeeTypeId",label:"付费方式"}})],1)],1)],1)},staticRenderFns:[]};var c=t("VU/8")(i,m,!1,function(e){t("M+VT")},"data-v-8a5934ce",null);a.default=c.exports},"M+VT":function(e,a){}});