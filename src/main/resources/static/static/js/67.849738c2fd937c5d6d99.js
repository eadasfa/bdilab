webpackJsonp([67],{MuWF:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("ZoQJ"),n=(l("zL8q"),[{label:"未使用",value:!1},{label:"已使用",value:!0}]),o=[30,15,5],r={data:function(){return{pickerOptions:a.g,statusOptions:n,expireOptions:o,merchantOptions:[],statistic:{},dialogVisible:!1,total:1,tableData:[],formInline:{brand:null,beginDate:null,endDate:null,current:1}}},mounted:function(){"2"===localStorage.userType&&this.query()},methods:{query:function(){var t=this;this.$axios.post("/group/getGroupCouponInfo",this.formInline).then(function(e){var l=e.data,a={totalNum:e.totalNum,totalSend:e.totalSend,totalUsed:e.totalUsed,totalUnexpired:e.totalUnexpired,totalExpired:e.totalExpired,couponMoney:e.couponMoney,totalMoney:e.totalMoney};t.statistic=a;var n=l.records,o=l.total;t.tableData=n,t.total=o}).catch(function(t){})},onDetailClick:function(t){this.$router.push({path:"/coupon_details/"+t.rId})},handleExcelDownload:function(){var t=this.formInline,e=t.beginDate,l=t.endDate;if(e&&l)if(Object(a.c)(e,l))Object(a.e)("不能超过一个月！",{type:"warning"});else{var n=localStorage.selectedShop;window.open(this.$axios.defaults.baseURL+"/downloadExcel/getCouponRecord/"+n).then(function(t){0===t.code?Object(a.e)("导出成功",{type:"success"}):Object(a.e)("导出失败",{type:"error"})}).catch(function(t){console.log("error",t)})}else Object(a.e)("请选择时间段，不能超过一个月！",{type:"warning"})},handleCurrentChange:function(t){this.formInline.current=t,this.query()}}},i={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"container"},[l("div",{staticClass:"handle-box"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"选择日期"}},[[l("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions,placeholder:"开始时间"},model:{value:t.formInline.beginDate,callback:function(e){t.$set(t.formInline,"beginDate",e)},expression:"formInline.beginDate"}}),t._v(" "),l("el-date-picker",{attrs:{"arrow-control":"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions,placeholder:"结束时间"},model:{value:t.formInline.endDate,callback:function(e){t.$set(t.formInline,"endDate",e)},expression:"formInline.endDate"}})]],2),t._v(" "),l("el-form-item",{attrs:{label:"品牌名称"}},[l("el-input",{model:{value:t.formInline.brand,callback:function(e){t.$set(t.formInline,"brand",e)},expression:"formInline.brand"}})],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")])],1)],1)],1),t._v(" "),l("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""}},[l("el-table-column",{attrs:{width:50,fixed:"",type:"index",label:"序号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.$index+10*(t.formInline.current-1)+1))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"rId",label:"商家ID",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"rNo",label:"商家编号",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"rName",label:"商家名称",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"totalNum",label:"代金券总数",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"hasUsedNum",label:"已使用总数",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"unExpiredNum",label:"未到期总数",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"expiredNum",label:"已过期总数",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"totalCouponMoney",label:"代金券金额",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"totalPayMoney",label:"消费金额",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){t.onDetailClick(e.row)}}},[t._v("详情\n          ")])]}}])})],1),t._v(" "),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"","current-page":t.formInline.current,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.formInline,"current",e)}}})],1),t._v(" "),l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"140px",model:t.statistic}},[l("el-form-item",{attrs:{label:"商家总数："}},[t._v(t._s(t.statistic.totalNum))]),t._v(" "),l("el-form-item",{attrs:{label:"发放总数总计："}},[t._v(t._s(t.statistic.totalSend))]),t._v(" "),l("el-form-item",{attrs:{label:"已使用总计："}},[t._v(t._s(t.statistic.totalUsed))]),t._v(" "),l("el-form-item",{attrs:{label:"未到期总计："}},[t._v(t._s(t.statistic.totalUnexpired))]),t._v(" "),l("el-form-item",{attrs:{label:"代金券已过期总计："}},[t._v(t._s(t.statistic.totalExpired))]),t._v(" "),l("el-form-item",{attrs:{label:"代金券金额总计："}},[t._v(t._s(t.statistic.couponMoney))]),t._v(" "),l("el-form-item",{attrs:{label:"消费金额总计："}},[t._v(t._s(t.statistic.totalMoney))])],1)],1)])},staticRenderFns:[]};var s=l("VU/8")(r,i,!1,function(t){l("O6p1")},"data-v-0bb76a7c",null);e.default=s.exports},O6p1:function(t,e){}});