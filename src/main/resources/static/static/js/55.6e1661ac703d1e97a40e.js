webpackJsonp([55],{EUIx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("ZoQJ"),l=[{label:"未使用",value:!1},{label:"已使用",value:!0}],r=[30,15,5],o={data:function(){return{pickerOptions:a.g,statusOptions:l,expireOptions:r,merchantNo:"系统用户",merchantName:"系统用户",merchantOptions:[],dialogVisible:!1,total:1,tableData:[],formInline:{restaurantId:null,startDate:null,endDate:null,couponName:null,couponUseFlag:null,expiredDays:null,current:1}}},mounted:function(){"2"===localStorage.userType&&(this.initMerchantData(),this.query())},methods:{initMerchantData:function(){var e=localStorage,t=e.merchant_no,n=e.merchant_name,a=e.selectedShop;this.merchantNo=t,this.merchantName=n,this.formInline.restaurantId=a},query:function(){var e=this;this.$axios.post("/couponRecord/getCouponRecordByRestaurantId",this.formInline).then(function(t){var n=t.page,a=n.records;e.tableData=a,e.total=n.total}).catch(function(e){})},handleExcelDownload:function(){var e=localStorage.selectedShop;window.open(this.$axios.defaults.baseURL+"/downloadExcel/getCouponRecord/"+e).then(function(e){0===e.code?Object(a.e)("导出成功",{type:"success"}):Object(a.e)("导出失败",{type:"error"})}).catch(function(e){console.log("error",e)})},handleCurrentChange:function(e){this.formInline.current=e,this.query()},getSummaries:function(e){var t=e.columns,n=e.data,a=[];return t.forEach(function(e,t){if(0!==t){1===t&&2===t&&(a[t]="");var l=n.map(function(t){return Number(t[e.property])});l.every(function(e){return isNaN(e)})?a[t]="N/A":(a[t]=l.reduce(function(e,t){var n=Number(t);return isNaN(n)?e:e+t},0),a[t]+=" 元")}else a[t]="合计"}),a}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"选择日期"}},[[n("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"开始时间"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}}),e._v(" "),n("el-date-picker",{attrs:{"arrow-control":"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"结束时间"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})]],2),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)],1)],1),e._v(" "),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","show-summary":"","summary-method":e.getSummaries}},[n("el-table-column",{attrs:{width:50,fixed:"",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"商家编号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponName",label:"商家名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponMoney",label:"账单总数",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponBuildTime",label:"应收总计",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponValidityTime",label:"发放代金券数量",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponValidityTime",label:"使用代金券数量",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponValidityTime",label:"核券抽成金额",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponValidityTime",label:"返款金额",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponValidityTime",label:"分享抽成金额",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"couponValidityTime",label:"实收金额",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.onDetailClick(t.row)}}},[e._v("详情\n          ")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.formInline,"current",t)}}})],1)],1)])},staticRenderFns:[]};var c=n("VU/8")(o,i,!1,function(e){n("n3A4")},"data-v-36a48288",null);t.default=c.exports},n3A4:function(e,t){}});