webpackJsonp([73],{"3y/c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("ZoQJ"),n={bonusName:null,size:10,current:1},l={id:null,bonusNo:null,projectNo:null,bonusName:null,startDate:null,bonusType:null,bonusNumber:null,bonusStatus:null,maxBonusNumber:null,bonusNote:null},r=[{label:"平台费用",value:0},{label:"抽成金额",value:1},{label:"手续费",value:2}],s=[{label:"可用",value:1},{label:"不可用",value:0}],u={code:[{required:!0,message:"请输入业态编号",trigger:"blur"}],bonusName:[{required:!0,message:"请输入业态名称",trigger:"blur"}],royaltyMoney:[{required:!0,message:"请输入上级编号",trigger:"blur"}],bonusNumber:[{required:!0,message:"请输入提成值，且为数字",trigger:"change"}],maxBonusNumber:[{required:!0,message:"请输入提成最大值，且为数字",trigger:"change"}],royaltyType:[{required:!0,message:"请选择状态",trigger:"change"}]},i={data:function(){return{projectTypeOptions:r,bonusStatusOptions:s,currentDialogVisible:!1,dialogStatus:"create",dialogTitleMap:{update:"修改",create:"新增"},total:0,isShow:!1,rules:u,formData:Object(o.b)(l),formInline:n,tableData:[]}},mounted:function(){this.query()},methods:{query:function(){var e=this;this.$axios({method:"post",url:"/platformBonus/selectPlatformBonusByPage",dataType:"json",params:this.formInline}).then(function(t){var a=t.records;e.tableData=a,e.total=t.total}).catch(function(e){})},handleCurrentChange:function(e){this.formInline.current=e,this.query()},handleCancel:function(){this.currentDialogVisible=!1},onAddClick:function(e){this.dialogStatus=e,this.formData=Object(o.b)(l),this.currentDialogVisible=!0},onUpdateClick:function(e,t){this.dialogStatus=e,this.formData=Object(o.b)(t),"CC02"===t.projectNo||"CC01"===t.projectNo?this.isShow=!0:this.isShow=!1,this.currentDialogVisible=!0},onDeleteClick:function(e){var t=this;this.$confirm("确定删除此信息吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"error"}).then(function(){t.$axios.delete("/platformBonus/deletePlatformBonusById?bonusID="+e.bonusID).then(function(e){e?(Object(o.e)("删除成功！",{type:"success"}),t.query()):Object(o.e)("删除失败！",{type:"error"})}).catch(function(e){console.log("error",e)})}).catch(function(){})},handleProjectTypeChange:function(){var e=this,t=this.formData.bonusType;this.$axios.get("/platformBonus/getProjectNoByType?bonusType="+t).then(function(t){1===t.code?e.formData.projectNo=t.data:Object(o.e)("项目编号查询失败！",{type:"error"})}).catch(function(e){console.log("error",e)})},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/platformBonus/addPlatformBonus",t.formData).then(function(e){e?(Object(o.e)("添加成功！",{type:"success"}),t.currentDialogVisible=!1,t.query()):Object(o.e)("添加失败！",{type:"error"})}).catch(function(e){console.log("error",e)})})},handleExcelDownload:function(){var e=localStorage.selectedShop;window.open(this.$axios.defaults.baseURL+"/downloadExcel/getPlatformMoney/"+e).then(function(e){0===e.code?Object(o.e)("导出成功",{type:"success"}):Object(o.e)("导出失败",{type:"error"})}).catch(function(e){console.log("error",e)})},resetForm:function(e){this.$refs[e].resetFields()},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/platformBonus/updatePlatformBonus",t.formData).then(function(e){e?(Object(o.e)("修改成功！",{type:"success"}),t.currentDialogVisible=!1,t.query()):Object(o.e)("修改失败！",{type:"error"})}).catch(function(e){console.log("error",e)})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10 right",attrs:{type:"primary",icon:"add"},on:{click:function(t){e.onAddClick("create")}}},[e._v("新增")]),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.formInline.bonusName,callback:function(t){e.$set(e.formInline,"bonusName",t)},expression:"formInline.bonusName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.handleExcelDownload}},[e._v("导出Excel")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{width:50,type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNo",label:"项目编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusName",label:"项目名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusType",label:"项目类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusNumber",label:"数值",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusStatus",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusNote",label:"备注",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.onUpdateClick("update",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){e.onDeleteClick(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.formInline,"current",t)}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitleMap[e.dialogStatus],visible:e.currentDialogVisible},on:{"update:visible":function(t){e.currentDialogVisible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目编号",prop:"projectNo"}},[a("el-input",{attrs:{placeholder:"根据项目类型自动生成",disabled:""},model:{value:e.formData.projectNo,callback:function(t){e.$set(e.formData,"projectNo",t)},expression:"formData.projectNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称",prop:"bonusName"}},[a("el-input",{model:{value:e.formData.bonusName,callback:function(t){e.$set(e.formData,"bonusName",t)},expression:"formData.bonusName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目类型",prop:"bonusType"}},[a("el-select",{attrs:{placeholder:"请选择项目类型"},on:{change:e.handleProjectTypeChange},model:{value:e.formData.bonusType,callback:function(t){e.$set(e.formData,"bonusType",t)},expression:"formData.bonusType"}},e._l(e.projectTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"提成值",prop:"bonusNumber"}},[a("el-input",{model:{value:e.formData.bonusNumber,callback:function(t){e.$set(e.formData,"bonusNumber",t)},expression:"formData.bonusNumber"}})],1),e._v(" "),e.isShow?a("el-form-item",{attrs:{label:"最大提成值",prop:"maxBonusNumber"}},[a("el-input",{model:{value:e.formData.maxBonusNumber,callback:function(t){e.$set(e.formData,"maxBonusNumber",t)},expression:"formData.maxBonusNumber"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"bonusStatus"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.formData.bonusStatus,callback:function(t){e.$set(e.formData,"bonusStatus",t)},expression:"formData.bonusStatus"}},e._l(e.bonusStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"启用日期"}},[[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:e.formData.startDate,callback:function(t){e.$set(e.formData,"startDate",t)},expression:"formData.startDate"}})]],2),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"bonusNote"}},[a("el-input",{model:{value:e.formData.bonusNote,callback:function(t){e.$set(e.formData,"bonusNote",t)},expression:"formData.bonusNote"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"120px"}},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.create("formData")}}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("formData")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]},m=a("VU/8")(i,c,!1,null,null,null);t.default=m.exports}});