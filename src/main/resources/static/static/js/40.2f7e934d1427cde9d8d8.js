webpackJsonp([40],{"/+bI":function(e,t){},mqPr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("ZoQJ"),r={id:null,businessLicenseNo:null,address:null,bankName:null,account:null,name:null,registrantPhone:null},o={data:function(){return{merchantNo:"系统用户",merchantName:"系统用户",merchantOptions:[],selectedMerchant:"",dialogVisible:!1,total:1,formData:r,addressOptions:[]}},mounted:function(){"2"===localStorage.userType&&(this.initMerchantData(),this.query(),this.getAreaTree())},methods:{initMerchantData:function(){var e=localStorage,t=e.merchant_no,a=e.merchant_name;e.selectedShop;this.merchantNo=t,this.merchantName=a},query:function(){var e=this,t=localStorage.selectedShop;this.$axios.get("/restaurantInfo/selectRestaurantInfoById/"+t).then(function(t){e.formData=t;for(var a=e.formData.adCode.split(","),n=0;n<a.length;n++){var r=a[n];a[n]=parseInt(r)}e.formData.address=a}).catch(function(e){})},getAreaTree:function(){var e=this;this.$axios.get("/area/getTree").then(function(t){e.addressOptions=t.result})},onSaveClick:function(){var e=this;this.$refs.feeForm.validate(function(t){localStorage.selectedShop;t&&(e.formData.adCode=e.formData.address.join(","),delete e.formData.address,e.$axios.post("/restaurantInfo/addRestaurantInfo",e.formData).then(function(t){0===t.code?(Object(n.e)(t.mes,{type:"success"}),e.currentDialogVisible=!1,e.query()):Object(n.e)(t.mes,{type:"error"})}).catch(function(e){console.log("error",e)}))})},onSelectedMerchantClick:function(){var e=this;this.$axios.get("/restaurantInfo/getResByWx").then(function(t){e.merchantOptions=t.res,t.res.length>1?e.dialogVisible=!0:Object(n.e)("当前账号只绑定一个商家！",{type:"warning"})}).catch(function(e){console.log(e)})},handleConfirmLogin:function(){var e=this.selectedMerchant,t=this.merchantOptions;if(e){for(var a=window.localStorage,n=0;n<t.length;n++){var r=t[n];r.id===parseInt(e)&&(a.merchant_name=r.name,a.merchant_no=r.no)}a.selectedShop=e,this.initMerchantData(),this.query(),this.dialogVisible=!1}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商家编号"}},[e._v(e._s(e.merchantNo))]),e._v(" "),a("el-form-item",{attrs:{label:"商家名称"}},[e._v(e._s(e.merchantName))]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSelectedMerchantClick}},[e._v("切换商家")])],1)],1),e._v(" "),a("hr",{staticStyle:{"margin-bottom":"20px"}})],1),e._v(" "),a("el-form",{ref:"feeForm",attrs:{model:e.formData,"label-width":"200px",inline:""}},[a("el-form-item",{attrs:{label:"开票名称:",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),a("br")],1),e._v(" "),a("el-form-item",{attrs:{label:"税号:",prop:"businessLicenseNo",rules:[{required:!0,message:"税号不能为空"}]}},[a("el-input",{model:{value:e.formData.businessLicenseNo,callback:function(t){e.$set(e.formData,"businessLicenseNo",t)},expression:"formData.businessLicenseNo"}}),a("br")],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address",rules:[{required:!0,message:"地址不能为空"}]}},[a("el-cascader",{staticClass:"input-style",attrs:{placeholder:"请选择省、市、区",options:e.addressOptions},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"registrantPhone",rules:[{required:!0,message:"电话不能为空"}]}},[a("el-input",{model:{value:e.formData.registrantPhone,callback:function(t){e.$set(e.formData,"registrantPhone",t)},expression:"formData.registrantPhone"}}),a("br")],1),e._v(" "),a("el-form-item",{attrs:{label:"开户行:",prop:"bankName",rules:[{required:!0,message:"开户行不能为空"}]}},[a("el-input",{model:{value:e.formData.bankName,callback:function(t){e.$set(e.formData,"bankName",t)},expression:"formData.bankName"}}),a("br")],1),e._v(" "),a("el-form-item",{attrs:{label:"账号:",prop:"account",rules:[{required:!0,message:"账号不能为空"}]}},[a("el-input",{model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1),a("br"),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"120px"}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary",icon:"el-icon-check"},on:{click:e.onSaveClick}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"店铺选择",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-select",{attrs:{placeholder:"请选择您要切换的店铺"},model:{value:e.selectedMerchant,callback:function(t){e.selectedMerchant=t},expression:"selectedMerchant"}},e._l(e.merchantOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmLogin}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(o,s,!1,function(e){a("/+bI")},"data-v-8587c73e",null);t.default=i.exports}});