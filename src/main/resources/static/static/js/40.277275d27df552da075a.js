webpackJsonp([40],{"97Vn":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("Dd8w"),n=t.n(l),o=t("ZoQJ"),i={docId:"",docSubmitTime:"",serviceType:"",linkManName:"",linkManTelephone:"",docment:"",handleWay:"",handleProcess:"",handleResult:"",handlePerson:"",handleDate:""},r={linkManName:"",linkManTelephone:""},s={beginDate:null,endDate:null,serviceType:"",handleStatus:"",current:1},c=[{label:"已处理",value:"已处理"},{label:"未处理",value:"未处理"},{label:"暂缓处理",value:"暂缓处理"}],d=["在线留言","电话沟通","微信沟通","其他"],u=["已处理","未处理","暂缓处理","其他"],m=[{label:"消费者",value:0},{label:"商家",value:1}],p={data:function(){return{total:0,formData:Object(o.b)(i),detailFormData:Object(o.b)(r),adviceHandleDialogVisible:!1,dialogTableVisible:!1,innerVisible:!1,statusOptions:c,adviceOptions:m,handleWayOptions:d,handleResultOptions:u,currentHandleProcess:"",formInline:s,tableData:[],detailTableData:[]}},mounted:function(){this.query()},methods:{query:function(){var e=this;this.$axios({method:"get",url:"/suggestService/list",params:this.formInline}).then(function(a){var t=a.records;e.tableData=t,e.total=a.total}).catch(function(e){})},handleCurrentChange:function(e){this.formInline.current=e,this.query()},handleCancel:function(){this.adviceHandleDialogVisible=!1},onUpdateClick:function(e){this.formData=Object(o.b)(e),this.formData=n()({handlePerson:localStorage.ms_username,handleDate:Object(o.h)(),handleProcess:"",handleWay:"",handleResult:""},this.formData),this.adviceHandleDialogVisible=!0},handleUpdate:function(){var e=this,a=this.formData,t=a.docId,l=a.handleWay,n=a.handleProcess,i=a.handlePerson,r=a.handleResult,s={docId:t,handleWay:l,handleProcess:n,handlePerson:i,handleDate:a.handleDate},c={docId:t,handleResult:r};this.$axios.post("/serviceHandle/addServiceHandle",s).then(function(a){0===a.code?e.$axios.post("/suggestService/addSuggestService",c).then(function(t){0===a.code?(Object(o.d)("修改成功！",{type:"success"}),e.adviceHandleDialogVisible=!1,e.query()):Object(o.d)("处理失败!",{type:"error"})}):Object(o.d)("修改失败！",{type:"error"})}).catch(function(e){console.log("error",e)})},onDetailClick:function(e){var a=this;this.dialogTableVisible=!0;var t=e.linkManName,l=e.linkManTelephone,n=e.docId;this.detailFormData={linkManName:t,linkManTelephone:l},this.$axios({method:"get",url:"serviceHandle/findAllServiceByServiceId?docId="+n}).then(function(e){a.detailTableData=e}).catch(function(e){})},handleHandleProcessClick:function(e){this.innerVisible=!0,this.currentHandleProcess=e}}},f={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"container"},[t("div",{staticClass:"handle-box"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"区间选择:"}},[[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:e.formInline.beginDate,callback:function(a){e.$set(e.formInline,"beginDate",a)},expression:"formInline.beginDate"}}),e._v(" "),t("el-date-picker",{attrs:{"arrow-control":"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"结束时间"},model:{value:e.formInline.endDate,callback:function(a){e.$set(e.formInline,"endDate",a)},expression:"formInline.endDate"}})]],2),e._v(" "),t("el-form-item",{attrs:{label:"意见渠道："}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.serviceType,callback:function(a){e.$set(e.formInline,"serviceType",a)},expression:"formInline.serviceType"}},e._l(e.adviceOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.handleStatus,callback:function(a){e.$set(e.formInline,"handleStatus",a)},expression:"formInline.handleStatus"}},e._l(e.statusOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)],1)],1),e._v(" "),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"docHandleTime",label:"日期",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"serviceType",label:"渠道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(0===a.row.permissionStatus?"商家":1===a.row.permissionStatus?"消费者":null)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"linkManName",label:"提议者",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"linkManTelephone",label:"联系方式",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"handleStatus",label:"状态",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"提议",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(0===a.row.type?"商家用户":"系统用户")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.onDetailClick(a.row)}}},[e._v("详情\n          ")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.onUpdateClick(a.row)}}},[e._v("处理\n          ")])]}}])})],1),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.$set(e.formInline,"current",a)}}})],1),e._v(" "),t("el-dialog",{attrs:{title:"意见处理",visible:e.adviceHandleDialogVisible},on:{"update:visible":function(a){e.adviceHandleDialogVisible=a}}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:22}},[t("el-form",{ref:"formData",attrs:{model:e.formData,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"提交时间:",prop:"docSubmitTime"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.docSubmitTime,callback:function(a){e.$set(e.formData,"docSubmitTime",a)},expression:"formData.docSubmitTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"渠道:",prop:"serviceType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"无"},model:{value:e.formData.serviceType,callback:function(a){e.$set(e.formData,"serviceType",a)},expression:"formData.serviceType"}},e._l(e.adviceOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"提交人:",prop:"linkManName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.linkManName,callback:function(a){e.$set(e.formData,"linkManName",a)},expression:"formData.linkManName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系方式:",prop:"linkManTelephone"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.linkManTelephone,callback:function(a){e.$set(e.formData,"linkManTelephone",a)},expression:"formData.linkManTelephone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"意见内容:"}},[t("el-input",{attrs:{disabled:"",type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"请输入意见内容"},model:{value:e.formData.docment,callback:function(a){e.$set(e.formData,"docment",a)},expression:"formData.docment"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处理方式",prop:"handleWay"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.handleWay,callback:function(a){e.$set(e.formData,"handleWay",a)},expression:"formData.handleWay"}},e._l(e.handleWayOptions,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"处理过程:"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:8}},model:{value:e.formData.handleProcess,callback:function(a){e.$set(e.formData,"handleProcess",a)},expression:"formData.handleProcess"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处理人:",prop:"handlePerson"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.handlePerson,callback:function(a){e.$set(e.formData,"handlePerson",a)},expression:"formData.handlePerson"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处理日期:",prop:"handleDate"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.handleDate,callback:function(a){e.$set(e.formData,"handleDate",a)},expression:"formData.handleDate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处理结果",prop:"handleResult"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.handleResult,callback:function(a){e.$set(e.formData,"handleResult",a)},expression:"formData.handleResult"}},e._l(e.handleResultOptions,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"120px"}},[t("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.handleUpdate()}}},[e._v("确定")])],1)],1)],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"意见处理详情",visible:e.dialogTableVisible},on:{"update:visible":function(a){e.dialogTableVisible=a}}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.detailFormData}},[t("el-form-item",{attrs:{label:"提议人:",prop:"linkManName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailFormData.linkManName,callback:function(a){e.$set(e.detailFormData,"linkManName",a)},expression:"detailFormData.linkManName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系方式:",prop:"linkManTelephone"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailFormData.linkManTelephone,callback:function(a){e.$set(e.detailFormData,"linkManTelephone",a)},expression:"detailFormData.linkManTelephone"}})],1)],1),e._v(" "),t("el-table",{attrs:{data:e.detailTableData}},[t("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{property:"handleWay",label:"处理方式"}}),e._v(" "),t("el-table-column",{attrs:{property:"handleProcess",label:"处理过程"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.handleHandleProcessClick(a.row.handleProcess)}}},[e._v("查看\n            ")]),e._v(" "),t("el-dialog",{attrs:{width:"30%",title:"处理过程",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(a){e.innerVisible=a}}},[t("span",[e._v(e._s(e.currentHandleProcess))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{property:"handlePerson",label:"处理人"}}),e._v(" "),t("el-table-column",{attrs:{property:"handleDate",label:"日期"}})],1)],1)],1)])},staticRenderFns:[]};var b=t("VU/8")(p,f,!1,function(e){t("Aczz")},"data-v-4cc3f916",null);a.default=b.exports},Aczz:function(e,a){}});