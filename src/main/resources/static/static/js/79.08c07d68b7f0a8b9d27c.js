webpackJsonp([79],{s7Qi:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=[{label:"对应桌子编号",value:0},{label:"支付返券绑定号",value:1},{label:"扫码返券绑定号",value:2},{label:"吧台助力红包",value:3}],r={data:function(){return{editDialog:!1,addDialog:!1,merchantNo:"33",applyRuleForm:{count:1},typeOptions:a,activeValue:1,isTable:!1,isPay:!1,isCode:!1,isHelp:!1,inactiveValue:0,total:0,formInline:{id:null,qrNun:"",current:1},ruleRqForm:{qrNun:"",tableNum:"",qrType:null,qrFlag:1},tableData:[]}},created:function(){this.query(),this.merchantNo=localStorage.merchant_no},methods:{query:function(){var e=this,t=localStorage.selectedShop;this.formInline.id=t,this.$axios({methods:"get",url:"/tableInfo/queryById",params:this.formInline}).then(function(t){var l=t.records,a=t.total;e.tableData=l,e.total=a})},onAddClick:function(){this.addDialog=!0},handleCurrentChange:function(e){this.formInline.current=e,this.query()},onEditClick:function(e,t){this.ruleRqForm=t,1!==t.qrFlag?(this.handleTypeChange(t.qrType),this.editDialog=!0):this.$notify.warning({title:"警告",message:"需要修改请先停止二维码使用状态"})},handleTypeChange:function(e){0===e&&(this.isTable=!0,this.isPay=!1,this.isCode=!1,this.isHelp=!1),1===e&&(this.isTable=!1,this.isPay=!0,this.isCode=!1,this.isHelp=!1),2===e&&(this.isTable=!1,this.isPay=!1,this.isCode=!0,this.isHelp=!1),3===e&&(this.isTable=!1,this.isPay=!1,this.isCode=!1,this.isHelp=!0)},handleAdd:function(){var e=this,t=(localStorage.selectedShop,this.ruleRqForm),l=t.qrNun,a=t.tableNum,r=t.qrType;this.$axios.post("/tableInfo/addByPC","id="+localStorage.selectedShop+"&qrNun="+l+"&tableNum="+a+"&qrType="+r).then(function(t){0===t.code?(e.addDialog=!1,e.$notify.success({title:"成功",message:"添加成功"}),e.query()):e.$notify.error({title:"失败",message:t.errMsg})}).catch(function(e){console.log("error",e)})},handleQrFlagStatusChange:function(e){this.ruleRqForm=e,this.handleEidt()},handleEidt:function(){var e=this,t=this.ruleRqForm,l=t.qrNun,a=t.tableNum,r=t.qrFlag,o=localStorage.selectedShop;this.$axios.post("/tableInfo/modify?id="+o+"&qrNun="+l+"&tableNum="+a+"&qrFlag="+r).then(function(t){0===t.code?(e.editDialog=!1,e.$notify.success({title:"成功",message:"修改成功"}),e.query()):e.$notify.error({title:"失败",message:"修改失败"})}).catch(function(e){console.log("error",e)})},onEditDel:function(e){var t=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.get("/tableInfo/deleteByCodeNum?qrNun="+e.qrNun).then(function(e){0===e.code?(t.$notify.success({title:"成功",message:e.message}),t.query()):t.$notify.error({title:"失败",message:e.message})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},resetForm:function(e){this.$refs[e].resetFields()}}},o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"container"},[l("div",{staticClass:"handle-box"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"二维码编号"}},[l("el-input",{attrs:{placeholder:"请输入二维码编号"},model:{value:e.formInline.qrNun,callback:function(t){e.$set(e.formInline,"qrNun",t)},expression:"formInline.qrNun"}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.onAddClick}},[e._v("添加")])],1)],1)],1),e._v(" "),l("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[l("el-table-column",{attrs:{width:50,fixed:"",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"qrNun",label:"二维码编号",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"qrType",label:"对应编号类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0===t.row.qrType?"对应桌子编号":1===t.row.qrType?"支付返券绑定号":2===t.row.qrType?"扫码返券绑定号":3===t.row.qrType?"吧台助力红包":"")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"tableNum",label:"绑定号",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"qrFlag",label:"使用状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0===t.row.qrFlag?"未使用":"使用"))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"状态管理",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-value":e.activeValue,"inactive-value":e.inactiveValue,"active-text":"使用","inactive-text":"停止","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(l){e.handleQrFlagStatusChange(t.row)}},model:{value:t.row.qrFlag,callback:function(l){e.$set(t.row,"qrFlag",l)},expression:"scope.row.qrFlag"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(l){e.onEditClick(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(l){e.onEditDel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.formInline,"current",t)}}})],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"二维码修改",width:"400px",visible:e.editDialog},on:{"update:visible":function(t){e.editDialog=t}}},[l("el-form",{ref:"as",attrs:{model:e.ruleRqForm,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"二维码编号"}},[l("el-input",{attrs:{disabled:""},model:{value:e.ruleRqForm.qrNun,callback:function(t){e.$set(e.ruleRqForm,"qrNun",t)},expression:"ruleRqForm.qrNun"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"对应类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择"},on:{change:function(t){e.handleTypeChange(e.ruleRqForm.qrType)}},model:{value:e.ruleRqForm.qrType,callback:function(t){e.$set(e.ruleRqForm,"qrType",t)},expression:"ruleRqForm.qrType"}},e._l(e.typeOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isTable,expression:"isTable"}],attrs:{label:"对应桌子编号",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}})],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isPay,expression:"isPay"}],attrs:{label:"支付返券绑定号",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}}),e._v(" "),l("span",[e._v("(前缀必须为ZFFQ)")])],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isCode,expression:"isCode"}],attrs:{label:"扫码返券绑定号",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}}),e._v(" "),l("span",[e._v("(前缀必须为SMFQ)")])],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isHelp,expression:"isHelp"}],attrs:{label:"吧台助力红包",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}}),e._v(" "),l("span",[e._v("(前缀必须为ZLHBM)")])],1),e._v(" "),l("el-form-item",{attrs:{label:"备注",prop:"note"}},[l("el-input",{model:{value:e.ruleRqForm.note,callback:function(t){e.$set(e.ruleRqForm,"note",t)},expression:"ruleRqForm.note"}})],1),e._v(" "),l("el-form-item",[l("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEidt()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"添加二维码",width:"400px",visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t}}},[l("el-form",{ref:"ruleRqForm",attrs:{model:e.ruleRqForm,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"二维码编号"}},[l("el-input",{model:{value:e.ruleRqForm.qrNun,callback:function(t){e.$set(e.ruleRqForm,"qrNun",t)},expression:"ruleRqForm.qrNun"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"对应类型",prop:"qrType"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){e.handleTypeChange(e.ruleRqForm.qrType)}},model:{value:e.ruleRqForm.qrType,callback:function(t){e.$set(e.ruleRqForm,"qrType",t)},expression:"ruleRqForm.qrType"}},e._l(e.typeOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isTable,expression:"isTable"}],attrs:{label:"对应桌子编号",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}})],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isPay,expression:"isPay"}],attrs:{label:"支付返券绑定号",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}}),e._v(" "),l("span",[e._v("(前缀必须为ZFFQ)")])],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isCode,expression:"isCode"}],attrs:{label:"扫码返券绑定号",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}}),e._v(" "),l("span",[e._v("(前缀必须为SMFQ)")])],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isHelp,expression:"isHelp"}],attrs:{label:"吧台助力红包",prop:"tableNum"}},[l("el-input",{model:{value:e.ruleRqForm.tableNum,callback:function(t){e.$set(e.ruleRqForm,"tableNum",t)},expression:"ruleRqForm.tableNum"}}),e._v(" "),l("span",[e._v("(前缀必须为ZLHBM)")])],1),e._v(" "),l("el-form-item",{attrs:{label:"备注",prop:"note"}},[l("el-input",{model:{value:e.ruleRqForm.note,callback:function(t){e.$set(e.ruleRqForm,"note",t)},expression:"ruleRqForm.note"}})],1),e._v(" "),l("el-form-item",[l("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd()}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]},n=l("VU/8")(r,o,!1,null,null,null);t.default=n.exports}});