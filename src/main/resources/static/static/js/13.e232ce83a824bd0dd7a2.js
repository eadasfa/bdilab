webpackJsonp([13],{"9bBU":function(e,t,a){a("mClu");var r=a("FeBl").Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var r,n=a("C4MV"),o=(r=n)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var r=a("kM2E");r(r.S+r.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},vqUi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),o=a("bOdI"),l=a.n(o),i=a("ZoQJ"),c={groupName:"",size:10,current:1},u={brandName:"",size:10,current:1},s={id:null,groupTel:null,groupPrincipal:null,groupName:null,groupLicense:null,groupAddress:null},d={brandName:null},p={code:[{required:!0,message:"请输入业态编号",trigger:"blur"}],bonusName:[{required:!0,message:"请输入业态名称",trigger:"blur"}],royaltyMoney:[{required:!0,message:"请输入上级编号",trigger:"blur"}],bonusNumber:[{required:!0,message:"请输入提成值，且为数字",trigger:"change"}],royaltyType:[{required:!0,message:"请选择状态",trigger:"change"}]},b={brandName:[{required:!0,message:"品牌名称为必输项",trigger:"blur"}]},f={data:function(){var e;return e={dialogVisible:!1,dialogStatus:"update",active:0,searchForm:u,brandFormData:Object(i.b)(d),brandTableData:[],currentDialogVisible:!1},l()(e,"dialogStatus","create"),l()(e,"dialogTitleMap",{update:"修改",create:"新增"}),l()(e,"total",0),l()(e,"currentGroupId",0),l()(e,"rules",p),l()(e,"rulesBrand",b),l()(e,"formData",Object(i.b)(s)),l()(e,"formInline",c),l()(e,"tableData",[]),e},mounted:function(){this.query()},methods:{query:function(){var e=this;this.$axios({method:"post",url:"/brand/listAllGroup",dataType:"json",params:this.formInline}).then(function(t){var a=t.records;e.creatTableData(a),e.total=t.total}).catch(function(e){})},creatTableData:function(e){for(var t=[],a=0;a<e.length;a++){for(var r=e[a].brand,o=[],l=0;l<r.length;l++){var i=r[l];o.push(i.brandName)}var c=o.join(";"),u=n()({brandName:c},e[a]);t.push(u)}this.tableData=t},handleCurrentChange:function(e){this.formInline.current=e,this.query()},handleBrandCurrentChange:function(e){this.searchForm.current=e,this.queryBrand()},handleCancel:function(){this.dialogVisible=!1},onAddClick:function(e){this.dialogStatus=e,this.dialogVisible=!0},onUpdateClick:function(e,t){this.dialogStatus=e,this.formData=Object(i.b)(t),this.dialogVisible=!0},onDeleteClick:function(e){var t=this;this.$confirm("确定删除此信息吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"error"}).then(function(){t.$axios.delete("/group/deleteGroupById/"+e.groupId).then(function(e){e?(Object(i.e)("删除成功！",{type:"success"}),t.query()):Object(i.e)("删除失败！",{type:"error"})}).catch(function(e){console.log("error",e)})}).catch(function(){})},resetForm:function(e){this.$refs[e].resetFields()},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;delete t.formData.brand,t.$axios.post("/group/addOrUpdate",t.formData).then(function(e){e?(Object(i.e)("修改成功！",{type:"success"}),t.dialogVisible=!1,t.query()):Object(i.e)("修改失败！",{type:"error"})}).catch(function(e){console.log("error",e)})})},brandBack:function(){this.active=0},onBrandManageClick:function(e){this.active=1,this.brandTableData=e.brand,this.currentGroupId=e.groupId},queryBrand:function(){var e=this;this.$axios.get("/brand/getAllBrandByGroupId/"+this.currentGroupId).then(function(t){var a=t.records;e.brandTableData=a}).catch(function(e){})},onBrandAddClick:function(e){this.dialogStatus=e,this.brandFormData=Object(i.b)(d),this.currentDialogVisible=!0},onBrandUpdateClick:function(e,t){this.dialogStatus=e,this.brandFormData=Object(i.b)(t),this.currentDialogVisible=!0},onBrandDeleteClick:function(e){var t=this;this.$confirm("确定删除此信息吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"error"}).then(function(){t.$axios.delete("/brand/deleteBrand?brandId="+e.brandId).then(function(e){e?(Object(i.e)("删除成功！",{type:"success"}),t.queryBrand()):Object(i.e)("删除失败！",{type:"error"})}).catch(function(e){console.log("error",e)})}).catch(function(){})},createBrand:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.brandFormData.groupId=t.currentGroupId,t.$axios.post("/brand/addBrand",t.brandFormData).then(function(e){e?(Object(i.e)("添加成功！",{type:"success"}),t.currentDialogVisible=!1,t.queryBrand()):Object(i.e)("添加失败！",{type:"error"})}).catch(function(e){console.log("error",e)})})},updateBrand:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.brandFormData.groupId=t.currentGroupId,t.$axios.post("/brand/addBrand",t.brandFormData).then(function(e){e?(Object(i.e)("修改成功！",{type:"success"}),t.currentDialogVisible=!1,t.queryBrand()):Object(i.e)("修改失败！",{type:"error"})}).catch(function(e){console.log("error",e)})})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.active}},[a("el-step",{attrs:{title:"集团管理"}}),e._v(" "),a("el-step",{attrs:{title:"品牌管理"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}]},[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"集团名称名称："}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.formInline.groupName,callback:function(t){e.$set(e.formInline,"groupName",t)},expression:"formInline.groupName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{width:50,type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"集团名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupAddress",label:"集团地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"负责人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupTel",label:"电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupLicense",label:"经营许可证",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.onUpdateClick("update",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){e.onDeleteClick(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.onBrandManageClick(t.row)}}},[e._v("品牌管理")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.formInline,"current",t)}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}]},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onBrandAddClick("create")}}},[e._v("新增")]),e._v(" "),a("el-button",{on:{click:e.brandBack}},[e._v("返回")]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{"margin-top":"20px"},attrs:{data:e.brandTableData,border:""}},[a("el-table-column",{attrs:{width:50,type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+10*(e.searchForm.current-1)+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.onBrandUpdateClick("update",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text"},on:{click:function(a){e.onBrandDeleteClick(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.searchForm.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleBrandCurrentChange,"update:currentPage":function(t){e.$set(e.searchForm,"current",t)}}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"集团修改",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"集团名称",prop:"groupName"}},[a("el-input",{model:{value:e.formData.groupName,callback:function(t){e.$set(e.formData,"groupName",t)},expression:"formData.groupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"集团地址",prop:"groupAddress"}},[a("el-input",{model:{value:e.formData.groupAddress,callback:function(t){e.$set(e.formData,"groupAddress",t)},expression:"formData.groupAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经营许可证",prop:"groupLicense"}},[a("el-input",{model:{value:e.formData.groupLicense,callback:function(t){e.$set(e.formData,"groupLicense",t)},expression:"formData.groupLicense"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"groupPrincipal"}},[a("el-input",{model:{value:e.formData.groupPrincipal,callback:function(t){e.$set(e.formData,"groupPrincipal",t)},expression:"formData.groupPrincipal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"groupTel"}},[a("el-input",{model:{value:e.formData.groupTel,callback:function(t){e.$set(e.formData,"groupTel",t)},expression:"formData.groupTel"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"120px"}},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("formData")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitleMap[e.dialogStatus],visible:e.currentDialogVisible},on:{"update:visible":function(t){e.currentDialogVisible=t}}},[a("el-form",{ref:"brandFormData",attrs:{model:e.brandFormData,rules:e.rulesBrand,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"brandName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.brandFormData.brandName,callback:function(t){e.$set(e.brandFormData,"brandName",t)},expression:"brandFormData.brandName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"120px"}},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createBrand("brandFormData")}}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateBrand("brandFormData")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]},g=a("VU/8")(f,m,!1,null,null,null);t.default=g.exports}});