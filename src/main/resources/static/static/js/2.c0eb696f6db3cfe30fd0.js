webpackJsonp([2],{"/6Xd":function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,"",""])},"2wNd":function(e,t,i){"use strict";function a(e){i("6pTJ")}var n=i("ewga"),o=i("iknZ"),s=i("VU/8"),r=a,c=s(n.a,o.a,r,"data-v-05300175",null);t.a=c.exports},"6fel":function(e,t,i){"use strict";var a=i("+6Bu"),n=i.n(a),o=i("woOf"),s=i.n(o),r=i("Dd8w"),c=i.n(r),l=i("NYxO"),u=i("0xDb"),h=i("2wNd"),d=[{label:"部件名称",key:"partName"},{label:"缺损构件",key:"defectiveComponent"},{label:"构件编号",key:"componentNo"},{label:"缺损类型",key:"defectiveType",type:"select"},{label:"缺损描述",key:"defectiveDescription"},{label:"缺损数量",key:"defectNumber"},{label:"照片附件",key:"photoAttachments",type:"file"},{label:"处理紧迫度",key:"degreeOfUrgency",type:"select",options:[{value:"紧急"},{value:"一般"}]},{label:"处理建议",key:"treatmentRecommendation",type:"select",options:[{value:"修复"},{value:"更换"},{value:"进一步检测"}]}],p={id:0,partName:"",defectiveComponent:"",componentNo:"",defectiveType:"",defectiveDescription:"",defectNumber:"",photoAttachments:"",degreeOfUrgency:"一般",treatmentRecommendation:"进一步检测"},f=[{label:"检查时间",key:"checkDate"},{label:"有无缺损",key:"defectStatus"},{label:"检查人员",key:"checkPerson"},{label:"天气",key:"weather"}],y={checkDate:"",defectStatus:"无",checkPerson:"",weather:""},m=[{key:"routeNo",label:"线路编号",value:"N0002"},{key:"routeName",label:"线路名称",value:"G322"},{key:"centerNo",label:"桥位桩号",value:"999.000"},{key:"bridgeNo",label:"桥梁编码",value:"A001"},{key:"bridgeName",label:"桥梁名称",value:"长江大桥"},{key:"custodyCompany",label:"管养单位",value:"养护一公司"}],k=[{label:"负责人",key:"checkPerson"},{label:"天气",key:"weather"},{label:"检查日期",key:"checkDate",type:"date"},{label:"缺损状况",key:"defectStatus",type:"select",options:[{value:"有"},{value:"无"}]},{label:"是否上报",key:"isReport",type:"select",options:[{value:"是"},{value:"否"}]}],v={id:0,checkPerson:"",weather:"",checkDate:"",defectStatus:"无",isReport:"是"};t.a={components:{ComponentTree:h.a},data:function(){return{activeTab:"current",bridge:{},constructTreeData:[],dialogStatus:"create",loading:!1,dialogTitleMap:{update:"编辑",create:"创建"},fileList:[],diseasesTreeMap:{},defectiveTypeOptions:[],formData:{},regularCheckFormData:{},diseases:[],currentDialogVisible:!1,currentPhotoDialogVisible:!1,selectedPhotoAttachmentOptions:[],currentCheckFormData:i.i(u.c)(p),currentCheckForm:d,inputForm:f,inputFormData:i.i(u.c)(y),editStatus:!0,regularCheckFormStructure:m,regularCheckTableData:[],regularCheckRowList:[],historyDiseaseDialogVisible:!1,historyDialogVisible:!1,isShowHistoryCheckDisease:!1,historyDiseaseFormStructure:k,historyDiseaseFormData:i.i(u.c)(v),historyCheckFormData:i.i(u.c)(v),diseasesBackup:[],historyDiseaseId:1}},computed:c()({},i.i(l.b)(["adminIdentity","constructTree","menus","selectedBridge","oftenInspection","oftenDiseases","oftenHistoryDiseases","oftenHistoryCheckDiseases","constructTreeMainBridgeType"])),mounted:function(){if(!this.$route.query.id&&!this.selectedBridge.id)return void i.i(u.d)("未选择桥梁，无法进行操作！",{type:"error"});this.selectedBridge.id&&(this.bridge=this.selectedBridge,this.query()),this.constructTreeMainBridgeType&&this.buildDiseasesTreeMap(this.constructTreeMainBridgeType)},watch:{menus:function(){var e=this;if(!this.bridge.id){var t=this.$route.query.id;this.menus.forEach(function(i){var a=i.children.filter(function(e){return e.id===parseInt(t)});a.length&&(e.bridge=a[0],e.selectBridge(e.bridge),e.query())})}},oftenInspection:function(){this.formData.id||(this.formData=i.i(u.c)(this.oftenInspection))},oftenDiseases:function(){this.filterDiseases()},activeTab:function(e){var t=this,i=this.activeTab;"recordTable"===i?this.queryAdminIdentity(this.bridge).then(function(){var e=t.adminIdentity,i=e.custodyCompany,a=e.centerNo,n=e.routeNo,o=e.routeName,s=t.bridge,r=s.bridgeNo,c=s.bridgeName;t.regularCheckFormData={bridgeNo:r,bridgeName:c,routeNo:n,routeName:o,centerNo:a,custodyCompany:i},t.createRegularCheckTable()}):"history"===i&&this.queryHistoryCheckDiseases()},constructTreeMainBridgeType:function(e){this.buildDiseasesTreeMap(e)}},methods:c()({},i.i(l.c)(["selectBridge","queryAdminIdentity","queryOftenInspection","queryOftenDiseases","queryOftenHistoryDiseases","queryOftenHistoryCheckDisease","createOftenInspection","createOftenDisease","updateOftenInspection","updateOftenDisease","updateOftenHistoryCheckDisease","deleteOftenDisease","deleteOftenHistoryDisease","deleteOftenHistoryCheckDisease","submitOftenInpsectionDiseases","queryDiseases"]),{query:function(){var e=this;this.queryOftenInspection(this.bridge).then(function(){e.queryCheckDiseases()}).catch(function(t){if(!e.formData.id&&t&&t.response&&t.response.status){var i=t.response.status,a=e.bridge;switch(i){case 404:e.createOftenInspection({bridge:a});break;default:console.log(t)}}})},buildDiseasesTreeMap:function(e){var t=this;if(e){var a={bridgeType:e,page:0,size:999};this.queryDiseases(a).then(function(e){t.diseasesTreeMap=i.i(u.o)(e)}).catch(function(e){console.log(e)})}},queryCheckDiseases:function(){var e=this;this.loading=!0,this.queryOftenDiseases().then(function(){e.filterDiseases(),e.loading=!1}).catch(function(t){i.i(u.d)("查询失败！",{type:"error"}),e.loading=!1})},queryHistoryCheckDiseases:function(){var e=this;this.loading=!0,this.queryOftenHistoryDiseases().then(function(){e.loading=!1}).catch(function(t){e.loading=!1})},filterDiseases:function(e){var t=e||"主桥单元",i="M-";0===t.indexOf("引桥单元")&&(i=t.replace("引桥单元","")+"-"),this.diseases=this.oftenDiseases.filter(function(e){return e.componentNo&&0===e.componentNo.indexOf(i)}),this.handleCurrentCheckInputData()},handleCurrentCheckInputData:function(){var e=this.diseases;0===e.length&&(this.inputFormData=i.i(u.c)(y));for(var t=0;t<e.length;t++){var a=e[t];a.checkDate&&(this.inputFormData.checkDate=a.checkDate),a.checkPerson&&(this.inputFormData.checkPerson=a.checkPerson),a.checkWeather&&(this.inputFormDatahis.weather=a.checkWeather),a.defectStatus&&(this.inputFormData.defectStatus=a.defectStatus,"无"===this.inputFormData.defectStatus&&(this.diseases=[]))}},onCurrentCheckOpen:function(e,t){if(this.fileList=[],this.currentDialogVisible=!0,this.dialogStatus=e,"create"===e){var a=this.currentCheckFormData,n=a.partName,o=a.componentNo,r=a.defectiveComponent;this.currentCheckFormData=c()({},i.i(u.c)(p),{photoAttachments:"",partName:n,componentNo:o,defectiveComponent:r})}else if("update"===e){this.currentCheckFormData=s()({},t);var l=this.currentCheckFormData.photoAttachments;this.previewPhotoAttachment(l,!0)}},onCurrentCheckAdd:function(){var e=this;this.loading=!0,this.createOftenDisease(this.currentCheckFormData).then(function(){e.loading=!1,e.currentDialogVisible=!1,i.i(u.d)(),e.queryCheckDiseases()}).catch(function(t){e.loading=!1,i.i(u.d)("",{type:"error"})})},onCurrentCheckUpdate:function(){var e=this;this.loading=!0,this.updateOftenDisease(this.currentCheckFormData).then(function(){e.loading=!1,e.currentDialogVisible=!1,i.i(u.d)("更新成功!",{type:"success"}),e.isShowHistoryCheckDisease?e.handleLookBackHistoryDisease(e.historyDiseaseId):e.queryCheckDiseases()}).catch(function(t){e.loading=!1,i.i(u.d)("更新失败!",{type:"error"})})},onCurrentCheckDel:function(e){var t=this;this.isShowHistoryCheckDisease?this.onHistoryCheckDiseaseDel(e):this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return t.deleteOftenDisease(e).then(function(){i.i(u.d)("删除成功!",{type:"success"}),"history"===t.activeTab?t.queryHistoryCheckDiseases():t.queryCheckDiseases()}).catch(function(e){i.i(u.d)("删除失败!",{type:"error"})})}).catch(function(){i.i(u.d)("已取消删除!",{type:"info"})})},handleUploadFileSuccess:function(e,t,i){e&&e.length&&(this.currentCheckFormData.photoAttachments&&(this.currentCheckFormData.photoAttachments+=","),this.currentCheckFormData.photoAttachments+=e[0])},handleFileRemove:function(e){var t=this.currentCheckFormData.photoAttachments,i=t.replace(e.name+",","");if(i!==t)this.currentCheckFormData.photoAttachments=i;else{var a=t.replace(e.name,"");this.currentCheckFormData.photoAttachments=a}},handleExceed:function(e,t){i.i(u.d)("最多可上传3张照片",{type:"warning"})},previewPhotoAttachment:function(e,t){if(t||(this.currentPhotoDialogVisible=!0),e){this.selectedPhotoAttachmentOptions=[],this.fileList=[];var i=e.indexOf(":")>-1,a=e.split(",");if(!i)for(var n=0;n<a.length;n++)if(a[n]){var o="/api/resource/download/"+a[n],s={name:a[n],photoAttachment:o};this.selectedPhotoAttachmentOptions.push(s),this.fileList.push(s)}}},previewPhotoAttachmentClose:function(){this.selectedPhotoAttachmentOptions=[]},handleExportCurrentCheck:function(){var e=this;this.$confirm("您确定要导出Excel吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.exportCurrentCheck()}).catch(function(){i.i(u.d)("已取消!",{type:"info"})})},exportCurrentCheck:function(){var e=this;Promise.all([i.e(36),i.e(35)]).then(function(){var t=i("zWO4"),a=t.export_json_to_excel,n=["序号","部件名称","缺损构件","缺损类型","缺损描述","照片附件","处治紧迫度","处治建议"],o=["id","partName","defectiveComponent","defectiveType","defectiveDescription","photoAttachments","degreeOfUrgency","treatmentRecommendation"];a(n,i.i(u.h)(o,e.diseases),"经常检查-"+(e.isShowHistoryCheckDisease?"历史检查结果":"当前检查结果"))}.bind(null,i)).catch(i.oe)},handleSubmitCheckDiseases:function(){var e=this;this.$confirm("您确定要提交所有当前检查结果吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.submitOftenInpsectionDiseases(e.historyDiseaseFormData).then(function(){e.queryCheckDiseases(),i.i(u.d)(),e.historyDiseaseDialogVisible=!1}).catch(function(e){i.i(u.d)("检查结果提交失败",{type:"error"})})}).catch(function(){i.i(u.d)("已取消!",{type:"info"})})},handleSubmitCheckDiseasesOpen:function(){var e=this.inputFormData,t=e.defectStatus,i=e.checkPerson,a=e.checkDate,n=e.weather,o={checkPerson:i,checkDate:a,defectStatus:t,weather:n,isReport:"是"};this.historyDiseaseFormData=o,this.historyDiseaseDialogVisible=!0},handleLookBackHistoryDisease:function(e){var t=this;this.historyDiseaseId=e,e&&this.queryOftenHistoryCheckDisease({id:e}).then(function(){!1===t.isShowHistoryCheckDisease&&(t.diseasesBackup=t.diseases,t.isShowHistoryCheckDisease=!0),t.diseases=t.oftenHistoryCheckDiseases,t.activeTab="current"}).catch(function(e){i.i(u.d)("查询历史结果病害列表失败",{type:"error"})})},handleBackToCurrentDisease:function(){this.isShowHistoryCheckDisease=!1,this.diseases=this.diseasesBackup,this.handleCurrentCheckInputData(),this.diseasesBackup=[]},onHistoryCheckOpen:function(e){this.historyDialogVisible=!0,this.historyCheckFormData=s()({},e)},onHistoryCheckUpdate:function(){var e=this;this.loading=!0,this.updateOftenHistoryCheckDisease(this.historyCheckFormData).then(function(){e.loading=!1,e.historyDialogVisible=!1,i.i(u.d)("更新成功!",{type:"success"}),e.queryOftenHistoryDiseases()}).catch(function(t){e.loading=!1,i.i(u.d)("更新失败!",{type:"error"})})},onHistoryCheckDiseaseDel:function(e){var t=this,a=this.historyDiseaseId,n={diseaseId:e.id,historyDiseaseId:a};this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return t.deleteOftenHistoryCheckDisease(n).then(function(){i.i(u.d)("删除成功!",{type:"success"}),t.handleLookBackHistoryDisease(a)}).catch(function(e){i.i(u.d)("删除失败!",{type:"error"})})}).catch(function(){i.i(u.d)("取消删除!",{type:"info"})})},onHistoryCheckDel:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return t.deleteOftenHistoryDisease(e).then(function(){i.i(u.d)("删除成功!",{type:"success"}),t.queryHistoryCheckDiseases()}).catch(function(e){i.i(u.d)("删除失败!",{type:"error"})})}).catch(function(){i.i(u.d)("取消删除!",{type:"info"})})},handleExportHistoryCheck:function(){var e=this;this.$confirm("您确定要导出Excel吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.exportHistoryCheck()}).catch(function(){i.i(u.d)("已取消!",{type:"info"})})},exportHistoryCheck:function(){var e=this;Promise.all([i.e(36),i.e(35)]).then(function(){var t=i("zWO4"),a=t.export_json_to_excel,n=["序号","负责人","天气","检查日期","缺损状况","是否上报"],o=["id","checkPerson","weather","checkDate","defectStatus","isReport"];a(n,i.i(u.h)(o,e.oftenHistoryDiseases),"经常检查-历史检查结果")}.bind(null,i)).catch(i.oe)},onSaveClick:function(){this.editStatus=!0},onEditCilck:function(){this.editStatus=!this.editStatus},handleNodeClick:function(e){var t=e.selectedPart,i=e.selectedComponent,a=e.selectedPartOf,o=n()(this.currentCheckFormData,[]),s=t.label,r=a.label;this.currentCheckFormData=c()({},o,{partName:s,defectiveComponent:i.label,componentNo:i.id}),this.onCurrentCheckOpen("create");try{var l=this.diseasesTreeMap[r][s];if(l&&0===l.length){var u=this.diseasesTreeMap[r][s][""];u&&u.length>0&&(l=u)}this.defectiveTypeOptions=l}catch(e){console.log(e)}},handleChangeUnit:function(e){var t=e.selectedUnit,i=e.approachType;if(i){var a=i.bridgeType;this.buildDiseasesTreeMap(a)}else this.buildDiseasesTreeMap(this.constructTreeMainBridgeType);this.filterDiseases(t)},handleConstructTreeDataChange:function(e){this.constructTreeData=e},createRegularCheckTable:function(){var e=this;this.regularCheckTableData=[],this.regularCheckRowList=[],this.constructTreeData.forEach(function(t){t.children.forEach(function(t){var a=0;t.children.forEach(function(n){var o=function(i){var n=i.id,o=e.diseases.filter(function(e){return e.componentNo===n});o.forEach(function(i){var a=i.defectiveType,n=i.defectiveDescription,o=i.treatmentRecommendation,s={part:t.label,defectiveType:a,defectiveDescription:n,treatmentRecommendation:o};e.regularCheckTableData.push(s)}),a+=o.length};i.i(u.m)(n.id)?n.children.forEach(o):[n].forEach(o)}),a&&e.regularCheckRowList.push(a)})})},spanRegularCheckTable:function(e){var t=(e.row,e.column,e.rowIndex);if(1===e.columnIndex)return i.i(u.k)(t,this.regularCheckRowList)},handleExportOftenTable:function(){var e=this;this.$confirm("您确定要导出经常检查记录表吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.open("/api/oftenInspectionTable/bridges/"+e.bridge.id)}).catch(function(){i.i(u.d)("取消下载!",{type:"info"})})}})}},"6pTJ":function(e,t,i){var a=i("C44t");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("0fb9c1f9",a,!0)},C44t:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,".box-card[data-v-05300175]{max-height:580px;overflow-x:hidden}",""])},O55X:function(e,t,i){var a=i("/6Xd");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("1f05dd2b",a,!0)},V4PB:function(e,t,i){"use strict";function a(e){i("O55X")}Object.defineProperty(t,"__esModule",{value:!0});var n=i("6fel"),o=i("ozo4"),s=i("VU/8"),r=a,c=s(n.a,o.a,r,null,null);t.default=c.exports},ewga:function(e,t,i){"use strict";var a=i("Dd8w"),n=i.n(a),o=i("NYxO"),s=i("0xDb");t.a={name:"ComponentTree",props:{bridge:{type:Object},isPopupOnNonComponent:{type:Boolean,default:!1}},data:function(){return{fullHeight:"",selectedUnit:"主桥单元",constructTreeData:[],approachBridgeUnit:[]}},mounted:function(){this.fullHeight=""+document.documentElement.clientHeight,window.onresize=function(){this.clientHeight=""+document.documentElement.clientHeight}},computed:n()({},i.i(o.b)(["constructTree"])),watch:{bridge:function(e){e.id&&this.queryConstructTree(e).then(function(){}).catch(function(e){})},clientHeight:function(){this.changeFixed(this.fullHeight)},constructTree:function(){var e=this.constructTree,t=e.main,a=e.approaches;this.constructTreeData=i.i(s.c)(t),this.approachBridgeUnit=a.map(function(e,t){return{value:"引桥单元N"+(t+1)}})},constructTreeData:function(e){this.$emit("onConstructTreeDataChange",e)}},methods:n()({},i.i(o.c)(["queryConstructTree"]),{changeFixed:function(e){console.log(e),this.$refs.homePage.style.height=e+"px"},handleNodeClick:function(e,t){var a=e.id,n=this.isPopupOnNonComponent;if(i.i(s.g)(a)){var o=e,r=t.parent,c=r.data,l=void 0,u=void 0;if(i.i(s.f)(c.id))l={id:"",label:""},u=c;else{for(;!i.i(s.m)(c.id);)r=r.parent,c=r.data;for(l=c;!i.i(s.f)(c.id);)r=r.parent,c=r.data;u=c}for(;!i.i(s.e)(c.id);)r=r.parent,c=r.data;var h=c;this.$emit("handleNodeClick",{selectedComponent:o,selectedBigComponent:l,selectedPart:u,selectedPartOf:h})}else n&&this.$emit("handleNodeClick",{selectedComponent:e,isNotComponent:!0})},handleChangeUnit:function(){var e=this.constructTree,t=e.main,a=e.approaches,n=e.approachTypes,o=this.selectedUnit,r=null;if("主桥单元"===o)this.constructTreeData=i.i(s.c)(t);else{var c=parseInt(o.replace("引桥单元N",""))-1;r=n[c]||{},this.constructTreeData=i.i(s.c)(a[c])}this.$emit("handleChangeUnit",{selectedUnit:o,approachType:r})}})}},iknZ:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{ref:"homePage",staticClass:"box-card",attrs:{label:"构件目录树"}},[i("div",{staticStyle:{margin:"10px 0"}},[i("el-select",{on:{change:e.handleChangeUnit},model:{value:e.selectedUnit,callback:function(t){e.selectedUnit=t},expression:"selectedUnit"}},[i("el-option",{attrs:{value:"主桥单元"}},[e._v("主桥单元")]),e._v(" "),e._l(e.approachBridgeUnit,function(t){return i("el-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])})],2)],1),e._v(" "),i("el-tree",{attrs:{"default-expand-all":"","node-key":"id","expand-on-click-node":!1,"highlight-current":!0,data:e.constructTreeData},on:{"node-click":e.handleNodeClick}})],1)],1)},n=[],o={render:a,staticRenderFns:n};t.a=o},ozo4:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:6}},[i("ComponentTree",{attrs:{bridge:e.bridge},on:{handleNodeClick:e.handleNodeClick,handleChangeUnit:e.handleChangeUnit,onConstructTreeDataChange:e.handleConstructTreeDataChange}})],1),e._v(" "),i("el-col",{attrs:{span:18}},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:e.isShowHistoryCheckDisease?"历史检查结果详情":"当前检查结果",name:"current"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:24}},[i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"病害类型"}})],1),e._v(" "),i("el-col",{attrs:{span:18}},[e.isShowHistoryCheckDisease?e._e():i("el-button",{attrs:{icon:"el-icon-search",loading:e.loading},on:{click:e.queryCheckDiseases}},[e._v("搜索")]),e._v(" "),e.isShowHistoryCheckDisease?i("el-button",{attrs:{loading:e.loading,icon:"el-icon-back"},on:{click:e.handleBackToCurrentDisease}},[e._v("返回")]):e._e(),e._v(" "),e.isShowHistoryCheckDisease?e._e():i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.onCurrentCheckOpen("create")}}},[e._v("添加")]),e._v(" "),i("el-button",{attrs:{type:"warning",icon:"el-icon-download"},on:{click:e.handleExportCurrentCheck}},[e._v("导出excel")]),e._v(" "),e.isShowHistoryCheckDisease?e._e():i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info",icon:"el-icon-check",disabled:!e.diseases.length},on:{click:e.handleSubmitCheckDiseasesOpen}},[e._v("提交")])],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},e._l(e.inputForm,function(t){return i("el-col",{key:t.key,attrs:{span:5}},[i("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.inputFormData[t.key],callback:function(i){e.$set(e.inputFormData,t.key,i)},expression:"inputFormData[item.key]"}},[i("template",{slot:"prepend"},[e._v(e._s(t.label))])],2)],1)})),e._v(" "),i("el-table",{attrs:{width:"100%",data:e.diseases,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"65",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"部件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.partName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"缺损构件"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectiveComponent))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"缺损类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectiveType))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"缺损描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectiveDescription))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"缺损数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectNumber))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"照片附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.photoAttachments?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.previewPhotoAttachment(t.row.photoAttachments)}}},[e._v("查看照片")]):i("span",[e._v("暂无照片")])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"95",align:"center",label:"处理紧迫度"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.degreeOfUrgency))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"处理建议","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.treatmentRecommendation))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){e.onCurrentCheckOpen("update",t.row)}}},[i("i",{staticClass:"el-icon-edit"})]),e._v(" "),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){e.onCurrentCheckDel(t.row)}}},[i("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1)],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"经常检查记录表",name:"recordTable"}},[i("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:20}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.handleExportOftenTable}},[e._v("导出经常检查记录表")])],1)],1),e._v(" "),i("el-form",{attrs:{"label-width":"90px"}},e._l(e.regularCheckFormStructure,function(t){return i("el-col",{key:t.key,attrs:{span:12}},[i("el-form-item",{attrs:{label:t.label,prop:t.key}},[i("el-input",{attrs:{readonly:"",value:e.regularCheckFormData[t.key]}})],1)],1)})),e._v(" "),i("el-table",{attrs:{width:"100%",data:e.diseases,"span-method":e.spanRegularCheckTable,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号","min-width":"60",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"检查项目","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.partName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"缺损类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectiveType))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"缺损范围","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectiveDescription))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"处治建议","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.treatmentRecommendation))])]}}])})],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"历史检查结果",name:"history"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:24}},[i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"处治紧迫度"}})],1),e._v(" "),i("el-col",{attrs:{span:14}},[i("el-button",{attrs:{icon:"el-icon-search",loading:e.loading},on:{click:e.queryHistoryCheckDiseases}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{type:"warning",icon:"el-icon-download"},on:{click:e.handleExportHistoryCheck}},[e._v("导出excel")])],1)],1),e._v(" "),i("el-table",{attrs:{width:"100%",data:e.oftenHistoryDiseases,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"65",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100",align:"center",label:"检查时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.checkDate))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100",align:"center",label:"天气"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.weather))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100",align:"center",label:"负责人"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.checkPerson))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100",align:"center",label:"缺损状况"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.defectStatus))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"110",align:"center",label:"是否上报"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.isReport))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"80",align:"center",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){e.handleLookBackHistoryDisease(t.row.id)}}},[e._v("查看")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){e.onHistoryCheckOpen(t.row)}}},[i("i",{staticClass:"el-icon-edit"})]),e._v(" "),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){e.onHistoryCheckDel(t.row)}}},[i("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1)],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{width:"60vw",title:e.dialogTitleMap[e.dialogStatus],visible:e.currentDialogVisible},on:{"update:visible":function(t){e.currentDialogVisible=t}}},[i("el-form",{attrs:{model:e.currentCheckFormData,"label-width":"100px",inline:""}},e._l(e.currentCheckForm,function(t){return i("el-col",{key:t.key,attrs:{span:12}},[i("el-form-item",{attrs:{label:t.label,prop:t.key,rules:[{required:!!t.required}]}},[t.type?e._e():i("el-input",{model:{value:e.currentCheckFormData[t.key],callback:function(i){e.$set(e.currentCheckFormData,t.key,i)},expression:"currentCheckFormData[item.key]"}}),e._v(" "),"select"===t.type&&t.options?i("el-select",{attrs:{filterable:""},model:{value:e.currentCheckFormData[t.key],callback:function(i){e.$set(e.currentCheckFormData,t.key,i)},expression:"currentCheckFormData[item.key]"}},e._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])})):e._e(),e._v(" "),"select"===t.type&&"defectiveType"===t.key?i("el-select",{attrs:{"allow-create":""},model:{value:e.currentCheckFormData[t.key],callback:function(i){e.$set(e.currentCheckFormData,t.key,i)},expression:"currentCheckFormData[item.key]"}},e._l(e.defectiveTypeOptions,function(t){return i("el-option",{key:t.diseaseType,attrs:{value:t.diseaseType}},[e._v(e._s(t.diseaseType))])})):e._e(),e._v(" "),"date"===t.type?i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",editable:""},model:{value:e.currentCheckFormData[t.key],callback:function(i){e.$set(e.currentCheckFormData,t.key,i)},expression:"currentCheckFormData[item.key]"}}):e._e(),e._v(" "),"file"===t.type?i("el-upload",{attrs:{action:"/api/resource/upload",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList,"on-remove":e.handleFileRemove,"on-success":e.handleUploadFileSuccess}},[i("el-button",{attrs:{size:"small",type:"warning"}},[e._v("上传文件")])],1):e._e()],1)],1)})),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.currentDialogVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onCurrentCheckAdd}},[e._v("确定")]):i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onCurrentCheckUpdate}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"照片预览",visible:e.currentPhotoDialogVisible},on:{"update:visible":function(t){e.currentPhotoDialogVisible=t},close:e.previewPhotoAttachmentClose}},[0===!e.selectedPhotoAttachmentOptions.length?i("p",[e._v("没有上传照片附件")]):e._l(e.selectedPhotoAttachmentOptions,function(e){return i("img",{key:e.photoAttachment,staticStyle:{width:"100%"},attrs:{src:e.photoAttachment,alt:"缺损照片预览"}})})],2),e._v(" "),i("el-dialog",{attrs:{width:"40vw",title:"提交当前检查结果",visible:e.historyDiseaseDialogVisible},on:{"update:visible":function(t){e.historyDiseaseDialogVisible=t}}},[i("el-form",{attrs:{model:e.historyDiseaseFormData,"label-width":"100px",inline:""}},e._l(e.historyDiseaseFormStructure,function(t){return i("el-col",{key:t.key,attrs:{span:24}},[i("el-form-item",{attrs:{label:t.label,prop:t.key,rules:[{required:!!t.required}]}},[t.type?e._e():i("el-input",{model:{value:e.historyDiseaseFormData[t.key],callback:function(i){e.$set(e.historyDiseaseFormData,t.key,i)},expression:"historyDiseaseFormData[item.key]"}}),e._v(" "),"select"===t.type&&t.options?i("el-select",{attrs:{filterable:"","allow-create":""},model:{value:e.historyDiseaseFormData[t.key],callback:function(i){e.$set(e.historyDiseaseFormData,t.key,i)},expression:"historyDiseaseFormData[item.key]"}},e._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])})):e._e(),e._v(" "),"date"===t.type?i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",editable:""},model:{value:e.historyDiseaseFormData[t.key],callback:function(i){e.$set(e.historyDiseaseFormData,t.key,i)},expression:"historyDiseaseFormData[item.key]"}}):e._e()],1)],1)})),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.historyDiseaseDialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmitCheckDiseases}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{width:"40vw",title:"历史检查结果",visible:e.historyDialogVisible},on:{"update:visible":function(t){e.historyDialogVisible=t}}},[i("el-form",{attrs:{model:e.historyCheckFormData,"label-width":"100px",inline:""}},e._l(e.historyDiseaseFormStructure,function(t){return i("el-col",{key:t.key,attrs:{span:24}},[i("el-form-item",{attrs:{label:t.label,prop:t.key,rules:[{required:!!t.required}]}},[t.type?e._e():i("el-input",{model:{value:e.historyCheckFormData[t.key],callback:function(i){e.$set(e.historyCheckFormData,t.key,i)},expression:"historyCheckFormData[item.key]"}}),e._v(" "),"select"===t.type&&t.options?i("el-select",{attrs:{filterable:"","allow-create":""},model:{value:e.historyCheckFormData[t.key],callback:function(i){e.$set(e.historyCheckFormData,t.key,i)},expression:"historyCheckFormData[item.key]"}},e._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])})):e._e(),e._v(" "),"date"===t.type?i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",editable:""},model:{value:e.historyCheckFormData[t.key],callback:function(i){e.$set(e.historyCheckFormData,t.key,i)},expression:"historyCheckFormData[item.key]"}}):e._e()],1)],1)})),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.historyDialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onHistoryCheckUpdate}},[e._v("确定")])],1)],1)],1)],1)],1)},n=[],o={render:a,staticRenderFns:n};t.a=o}});