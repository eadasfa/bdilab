webpackJsonp([69],{dSpb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("ZoQJ"),r={rNo:null,rName:null,operateType:null,address:null,current:1},n={current:1,name:null,state:null,address:null,idCard:null},s={data:function(){return{areaList:[],saleNameTableData:[],total:0,saleTotal:0,formInline:r,searchForm:n,active:0,tableData:[],formData:{}}},created:function(){this.query(),this.getAreaTree()},methods:{query:function(){var e=this;this.$axios.post("/restaurantInfo/getRestaurantAndSalesByPage",this.formInline).then(function(t){var a=t.records;e.tableData=a,e.total=t.total}).catch(function(e){})},querySale:function(){var e=this;this.$axios({url:"/sales/findSalesByConditions",methods:"post",params:this.searchForm}).then(function(t){var a=t.records;e.saleNameTableData=a,e.saleTotal=t.total}).catch(function(e){})},getAreaTree:function(){var e=this;this.$axios.get("/area/getTree").then(function(t){e.areaList=t.result})},handleCurrentChange:function(e){this.formInline.current=e,this.query()},handleEdit:function(e){this.active=1,this.querySale(),this.formData=Object(l.b)(e)},handleSelectedSaleName:function(e){var t=this,a={salesId:e.saleID,id:this.formData.rId};this.$axios({url:"/restaurantInfo/modifySales",methods:"post",params:a}).then(function(e){0===e.code?(Object(l.d)("移交成功！",{type:"success"}),t.active=2):Object(l.d)("移交失败！",{type:"error"})}).catch(function(e){})},handleReturn:function(){this.active=0,this.query()},handleSalePageChange:function(e){console.log("page",e),this.searchForm.current=e,this.querySale()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.active}},[a("el-step",{attrs:{title:"服务移交"}}),e._v(" "),a("el-step",{attrs:{title:"选择销售员"}}),e._v(" "),a("el-step",{attrs:{title:"移交完成"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}]},[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"商家编号"}},[a("el-input",{attrs:{placeholder:"请输入商家编号"},model:{value:e.formInline.rNo,callback:function(t){e.$set(e.formInline,"rNo",t)},expression:"formInline.rNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家名称"}},[a("el-input",{attrs:{placeholder:"请输入商家名称"},model:{value:e.formInline.rName,callback:function(t){e.$set(e.formInline,"rName",t)},expression:"formInline.rName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"业态状态"}},[a("el-input",{attrs:{placeholder:"请输入业态状态"},model:{value:e.formInline.operateType,callback:function(t){e.$set(e.formInline,"operateType",t)},expression:"formInline.operateType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域"}},[e.areaList?a("el-cascader",{attrs:{clearable:"",options:e.areaList},model:{value:e.formInline.address,callback:function(t){e.$set(e.formInline,"address",t)},expression:"formInline.address"}}):a("el-input",{model:{value:e.formInline.address,callback:function(t){e.$set(e.formInline,"address",t)},expression:"formInline.address"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rNo",label:"商家编号","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"principalName",label:"负责人名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rName",label:"商家名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"\taddress",label:"所属区域",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detailAddress",label:"地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"principalTelephone",label:"电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleName",label:"销售员",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"面积",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"服务移交",width:"180",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("选择销售员")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.formInline.current,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.formInline,"current",t)}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}]},[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.searchForm.address,callback:function(t){e.$set(e.searchForm,"address",t)},expression:"searchForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{attrs:{placeholder:"请输入身份证号"},model:{value:e.searchForm.idCard,callback:function(t){e.$set(e.searchForm,"idCard",t)},expression:"searchForm.idCard"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.querySale}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.handleReturn}},[e._v("返回")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.saleNameTableData,border:""}},[a("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+10*(e.formInline.current-1)+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleType",label:"销售人员类型","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleName",label:"姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleTel",label:"电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleIDCardNo",label:"身份证号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleAddress",label:"地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0===t.row.state?"停止":"使用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.handleSelectedSaleName(t.row)}}},[e._v("确认选择")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.searchForm.current,layout:"prev, pager, next",total:e.saleTotal},on:{"current-change":e.handleSalePageChange,"update:currentPage":function(t){e.$set(e.searchForm,"current",t)}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}]},[a("el-row",[a("el-col",{attrs:{offset:8}},[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#409eff"}}),e._v(" "),a("span",[e._v("移交成功")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.handleReturn}},[e._v("查看")])],1)],1)],1)],1)},staticRenderFns:[]},i=a("VU/8")(s,o,!1,null,null,null);t.default=i.exports}});